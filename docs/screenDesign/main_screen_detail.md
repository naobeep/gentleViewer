# Gentle Viewer - ãƒ¡ã‚¤ãƒ³ç”»é¢ è©³ç´°è¨­è¨ˆæ›¸

## ç›®æ¬¡

1. [ç”»é¢æ¦‚è¦](#1-ç”»é¢æ¦‚è¦)
2. [å…¨ä½“ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ](#2-å…¨ä½“ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ)
3. [ãƒ˜ãƒƒãƒ€ãƒ¼](#3-ãƒ˜ãƒƒãƒ€ãƒ¼)
4. [ã‚µã‚¤ãƒ‰ãƒãƒ¼](#4-ã‚µã‚¤ãƒ‰ãƒãƒ¼)
5. [ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆã‚¨ãƒªã‚¢](#5-ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆã‚¨ãƒªã‚¢)
6. [ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼](#6-ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼)
7. [ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³](#7-ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³)
8. [ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼](#8-ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼)
9. [çŠ¶æ…‹ç®¡ç†](#9-çŠ¶æ…‹ç®¡ç†)
10. [ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ](#10-ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ)

---

## 1. ç”»é¢æ¦‚è¦

### 1.1 ç›®çš„

- ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€è¦§è¡¨ç¤ºãƒ»ç®¡ç†
- ã‚¿ã‚°ã«ã‚ˆã‚‹åˆ†é¡ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- ãƒ•ã‚¡ã‚¤ãƒ«ã®æ¤œç´¢ãƒ»ã‚½ãƒ¼ãƒˆ
- ãƒ“ãƒ¥ãƒ¼ãƒ¯ãƒ¼ã¸ã®é·ç§»

### 1.2 ä¸»è¦æ©Ÿèƒ½

- ãƒ•ã‚¡ã‚¤ãƒ«è¡¨ç¤ºï¼ˆã‚°ãƒªãƒƒãƒ‰/ãƒªã‚¹ãƒˆï¼‰
- ã‚¿ã‚°é¸æŠã«ã‚ˆã‚‹ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã®é¸æŠ
- ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—å¯¾å¿œ
- ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼

---

## 2. å…¨ä½“ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

### 2.1 åŸºæœ¬æ§‹æˆ

```txt
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ˜ãƒƒãƒ€ãƒ¼ (é«˜ã•: 64px)                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           â”‚ ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ (é«˜ã•: 48px)                                  â”‚
â”‚ ã‚µã‚¤ãƒ‰ãƒãƒ¼ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚           â”‚ â”‚                                                       â”‚â”‚
â”‚ (240px)   â”‚ â”‚ ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆã‚¨ãƒªã‚¢                                  â”‚â”‚
â”‚           â”‚ â”‚ (å¯å¤‰é«˜ã•)                                            â”‚â”‚
â”‚           â”‚ â”‚                                                       â”‚â”‚
â”‚           â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ (é«˜ã•: 32px)                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ã‚µã‚¤ã‚ºå®šç¾©

```typescript
const LAYOUT = {
  header: {
    height: 64,
    padding: '0 16px',
  },
  sidebar: {
    width: 240,
    minWidth: 200,
    maxWidth: 400,
    resizable: false, // Phase 2ã§å¯¾å¿œ
  },
  toolbar: {
    height: 48,
    padding: '8px 16px',
  },
  statusBar: {
    height: 32,
    padding: '0 16px',
  },
};
```

---

## 3. ãƒ˜ãƒƒãƒ€ãƒ¼

### 3.1 ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

```txt
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ğŸ©] Gentle Viewer    [ğŸ” æ¤œç´¢ãƒãƒ¼ (400px)]    [âš™ï¸] [ğŸ”’] [â”€] [â–¡] [Ã—] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 è¦ç´ è©³ç´°

#### 3.2.1 ã‚¢ãƒ—ãƒªãƒ­ã‚´ & ã‚¿ã‚¤ãƒˆãƒ«

```typescript
<div className="header-left">
  <img src="icon.png" width={32} height={32} />
  <h1>Gentle Viewer</h1>
</div>
```

**ã‚¹ã‚¿ã‚¤ãƒ«:**

- ãƒ­ã‚´ã‚µã‚¤ã‚º: 32x32px
- ã‚¿ã‚¤ãƒˆãƒ«: 18px / 600
- å·¦ãƒãƒ¼ã‚¸ãƒ³: 16px

#### 3.2.2 æ¤œç´¢ãƒãƒ¼

```txt
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œç´¢...                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä»•æ§˜:**

- å¹…: 400pxï¼ˆå›ºå®šï¼‰
- é«˜ã•: 40px
- ãƒœãƒ¼ãƒ€ãƒ¼: 1px solid divider
- ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚: primary color border
- ã‚¢ã‚¤ã‚³ãƒ³: å·¦å´ã«è™«çœ¼é¡ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆ20pxï¼‰
- ã‚¯ãƒªã‚¢ãƒœã‚¿ãƒ³: å…¥åŠ›ä¸­ã®ã¿è¡¨ç¤ºï¼ˆå³å´ï¼‰

**æ©Ÿèƒ½:**

- ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«ã‚µãƒ¼ãƒï¼ˆ300msãƒ‡ãƒã‚¦ãƒ³ã‚¹ï¼‰
- ãƒ•ã‚¡ã‚¤ãƒ«åã®éƒ¨åˆ†ä¸€è‡´æ¤œç´¢
- Enterã‚­ãƒ¼ã§æ¤œç´¢å®Ÿè¡Œ
- Escã‚­ãƒ¼ã§ã‚¯ãƒªã‚¢

```typescript
interface SearchBarProps {
  value: string;
  onChange: (value: string) => void;
  onSearch: () => void;
  placeholder?: string;
}

const SearchBar: React.FC<SearchBarProps> = ({ value, onChange, onSearch }) => {
  const debouncedSearch = useDebouncedCallback(onChange, 300);

  return (
    <div className="search-bar">
      <SearchIcon size={20} />
      <input
        type="text"
        value={value}
        onChange={(e) => debouncedSearch(e.target.value)}
        onKeyDown={(e) => e.key === 'Enter' && onSearch()}
        placeholder="ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œç´¢..."
      />
      {value && <ClearIcon onClick={() => onChange('')} />}
    </div>
  );
};
```

#### 3.2.3 ãƒ˜ãƒƒãƒ€ãƒ¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

```txt
[âš™ï¸ è¨­å®š] [ğŸ”’ ãƒ­ãƒƒã‚¯] [â”€ æœ€å°åŒ–] [â–¡ æœ€å¤§åŒ–] [Ã— é–‰ã˜ã‚‹]
```

**ãƒœã‚¿ãƒ³ä»•æ§˜:**

- ã‚µã‚¤ã‚º: 40x40px
- ã‚¢ã‚¤ã‚³ãƒ³ã‚µã‚¤ã‚º: 20x20px
- ãƒ›ãƒãƒ¼: background-color: hover
- é–“éš”: 4px

**ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ:**

- âš™ï¸ è¨­å®š: `Ctrl + ,`
- ğŸ”’ ãƒ­ãƒƒã‚¯: `Ctrl + L`
- æœ€å°åŒ–: `Alt + F9`
- æœ€å¤§åŒ–: `Alt + F10`
- é–‰ã˜ã‚‹: `Alt + F4`

---

## 4. ã‚µã‚¤ãƒ‰ãƒãƒ¼

### 4.1 å…¨ä½“æ§‹æˆ

```txt
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã‚µã‚¤ãƒ‰ãƒãƒ¼ (240px)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚»ã‚¹]         â”‚
â”‚  ğŸ“ æœ€è¿‘è¿½åŠ                â”‚
â”‚  â­ ãŠæ°—ã«å…¥ã‚Š             â”‚
â”‚  ğŸ”– ä¿å­˜æ¸ˆã¿æ¤œç´¢           â”‚
â”‚  ğŸ“Š çµ±è¨ˆ                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ã‚¿ã‚°ä¸€è¦§]                 â”‚
â”‚  ğŸ” [ã‚¿ã‚°ã‚’æ¤œç´¢...]        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚  [+ æ–°è¦ã‚¿ã‚°]              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚  â˜‘ ğŸ”µ æ¼«ç”» (87)    [â­]   â”‚
â”‚  â˜‘ ğŸŸ¢ ã‚¤ãƒ©ã‚¹ãƒˆ (125) [â­]  â”‚
â”‚  â˜ ğŸ”´ å†™çœŸé›† (43)          â”‚
â”‚  â˜ ğŸŸ¡ å‹•ç”» (24)            â”‚
â”‚    â–¼ ã‚¢ãƒ‹ãƒ¡ (12)           â”‚
â”‚    â–¼ å®Ÿå†™ (12)             â”‚
â”‚  â˜ ğŸŸ£ PDF (8)              â”‚
â”‚  â˜ ğŸŸ  éŸ³å£° (15)            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚  ğŸ‘ï¸ éš ã—ã‚¿ã‚°ã‚’è¡¨ç¤º         â”‚
â”‚     (Ctrl+Shift+H)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚»ã‚¹ã‚»ã‚¯ã‚·ãƒ§ãƒ³

**å„é …ç›®ã®ä»•æ§˜:**

```typescript
interface QuickAccessItem {
  icon: ReactNode;
  label: string;
  count?: number;
  query: SearchQuery;
  shortcut?: string;
}

const quickAccessItems: QuickAccessItem[] = [
  {
    icon: <FolderIcon />,
    label: 'æœ€è¿‘è¿½åŠ ',
    count: 45,
    query: { dateRange: [sevenDaysAgo, now] },
  },
  {
    icon: <StarIcon />,
    label: 'ãŠæ°—ã«å…¥ã‚Š',
    count: 23,
    query: { favorite: true },
  },
  {
    icon: <BookmarkIcon />,
    label: 'ä¿å­˜æ¸ˆã¿æ¤œç´¢',
    onClick: () => openSavedSearches(),
  },
  {
    icon: <ChartIcon />,
    label: 'çµ±è¨ˆ',
    onClick: () => openStatistics(),
  },
];
```

**ã‚¹ã‚¿ã‚¤ãƒ«:**

- é«˜ã•: 40px
- ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°: 8px 16px
- ãƒ›ãƒãƒ¼: background-color: hover
- é¸æŠçŠ¶æ…‹: background-color: primary (10% opacity)

### 4.3 ã‚¿ã‚°æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹

```txt
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” ã‚¿ã‚°ã‚’æ¤œç´¢...          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ©Ÿèƒ½:**

- FTS5ã«ã‚ˆã‚‹éƒ¨åˆ†ä¸€è‡´æ¤œç´¢
- ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«ã‚µãƒ¼ãƒ
- ã²ã‚‰ãŒãªâ†’ã‚«ã‚¿ã‚«ãƒŠè‡ªå‹•å¤‰æ›
- æœ€å¤§20ä»¶ã®å€™è£œè¡¨ç¤º

```typescript
const TagSearchBox: React.FC = () => {
  const [query, setQuery] = useState('');
  const [suggestions, setSuggestions] = useState<Tag[]>([]);

  const searchTags = useDebouncedCallback(async (q: string) => {
    if (q.length > 0) {
      const results = await window.electronAPI.searchTags(q);
      setSuggestions(results.slice(0, 20));
    } else {
      setSuggestions([]);
    }
  }, 300);

  return (
    <div className="tag-search">
      <SearchIcon size={16} />
      <input
        value={query}
        onChange={(e) => {
          setQuery(e.target.value);
          searchTags(e.target.value);
        }}
        placeholder="ã‚¿ã‚°ã‚’æ¤œç´¢..."
      />
      {suggestions.length > 0 && (
        <SuggestionList suggestions={suggestions} />
      )}
    </div>
  );
};
```

### 4.4 æ–°è¦ã‚¿ã‚°ãƒœã‚¿ãƒ³

```txt
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [+] æ–°è¦ã‚¿ã‚°ã‚’ä½œæˆ        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä»•æ§˜:**

- é«˜ã•: 36px
- ãƒœãƒ¼ãƒ€ãƒ¼: 1px dashed divider
- ã‚¯ãƒªãƒƒã‚¯: æ–°è¦ã‚¿ã‚°ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’é–‹ã
- ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ: `Ctrl + N`

### 4.5 ã‚¿ã‚°ã‚¢ã‚¤ãƒ†ãƒ 

#### åŸºæœ¬è¡¨ç¤º

```txt
â˜‘ ğŸ”µ æ¼«ç”» (87)         [â­]
â”‚  â”‚  â”‚   â”‚           â”‚
â”‚  â”‚  â”‚   â”‚           â””â”€ ãŠæ°—ã«å…¥ã‚Šãƒœã‚¿ãƒ³
â”‚  â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ãƒ•ã‚¡ã‚¤ãƒ«æ•°
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ã‚¿ã‚°å
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ è‰²ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹
```

**ã‚µã‚¤ã‚º:**

- é«˜ã•: 36px
- ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°: 6px 12px
- å·¦ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ: éšå±¤ã”ã¨ã« +16px

**çŠ¶æ…‹:**

| çŠ¶æ…‹ | èƒŒæ™¯è‰² | ãƒœãƒ¼ãƒ€ãƒ¼ |
|-----|--------|---------|
| é€šå¸¸ | transparent | none |
| ãƒ›ãƒãƒ¼ | hover | none |
| é¸æŠ | primary(10%) | 2px solid primary |
| ãƒ‰ãƒ©ãƒƒã‚°ã‚ªãƒ¼ãƒãƒ¼ | primary(20%) | 2px dashed primary |

**ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³:**

- ã‚¯ãƒªãƒƒã‚¯: ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹åˆ‡æ›¿
- ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯: ã‚¿ã‚°ç·¨é›†ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
- å³ã‚¯ãƒªãƒƒã‚¯: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼
- ãƒ‰ãƒ©ãƒƒã‚°: ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ã‚¿ã‚°ä»˜ä¸

#### éšå±¤è¡¨ç¤º

```txt
â˜ ğŸŸ¡ å‹•ç”» (24)         [â­]
  â–¼ ã‚¢ãƒ‹ãƒ¡ (12)
  â–¼ å®Ÿå†™ (12)
```

**æŠ˜ã‚ŠãŸãŸã¿:**

- å±•é–‹ã‚¢ã‚¤ã‚³ãƒ³: â–¼ï¼ˆå±•é–‹æ™‚ï¼‰/ â–¶ï¼ˆæŠ˜ã‚ŠãŸãŸã¿æ™‚ï¼‰
- ã‚¢ã‚¤ã‚³ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§é–‹é–‰
- çŠ¶æ…‹ã‚’ä¿å­˜ï¼ˆlocalStorageï¼‰

```typescript
interface TagItemProps {
  tag: Tag;
  level: number;
  selected: boolean;
  onSelect: (tagId: number) => void;
  onToggle?: (tagId: number) => void;
}

const TagItem: React.FC<TagItemProps> = ({
  tag,
  level,
  selected,
  onSelect,
  onToggle
}) => {
  const [expanded, setExpanded] = useState(true);
  const hasChildren = tag.children && tag.children.length > 0;

  return (
    <div
      className={`tag-item level-${level}`}
      style={{ paddingLeft: `${level * 16 + 12}px` }}
    >
      {hasChildren && (
        <button onClick={() => setExpanded(!expanded)}>
          {expanded ? <ChevronDownIcon /> : <ChevronRightIcon />}
        </button>
      )}

      <input
        type="checkbox"
        checked={selected}
        onChange={() => onSelect(tag.id)}
      />

      <div
        className="tag-color-indicator"
        style={{ backgroundColor: tag.color }}
      />

      <span className="tag-name">{tag.name}</span>
      <span className="tag-count">({tag.usage_count})</span>

      {tag.is_favorite && <StarIcon className="favorite-icon" />}

      {expanded && hasChildren && (
        <div className="tag-children">
          {tag.children.map(child => (
            <TagItem
              key={child.id}
              tag={child}
              level={level + 1}
              selected={selected}
              onSelect={onSelect}
            />
          ))}
        </div>
      )}
    </div>
  );
};
```

### 4.6 éš ã—ã‚¿ã‚°ã‚»ã‚¯ã‚·ãƒ§ãƒ³

```txt
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ‘ï¸ éš ã—ã‚¿ã‚°ã‚’è¡¨ç¤º (Ctrl+Shift+H)
```

**é€šå¸¸æ™‚:**

- ã‚°ãƒ¬ãƒ¼ã‚¢ã‚¦ãƒˆè¡¨ç¤º
- ã‚¯ãƒªãƒƒã‚¯ã§èªè¨¼ãƒ€ã‚¤ã‚¢ãƒ­ã‚°

**è¡¨ç¤ºä¸­:**

```txt
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ”’ éš ã—ã‚¿ã‚°
  â˜ [ç§˜å¯†ã‚¿ã‚°1] (12)
  â˜ [ç§˜å¯†ã‚¿ã‚°2] (8)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ‘ï¸ éš ã—ã‚¿ã‚°ã‚’éš ã™ (Ctrl+Shift+H)
```

---

## 5. ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆã‚¨ãƒªã‚¢

### 5.1 ãƒ„ãƒ¼ãƒ«ãƒãƒ¼

```txt
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â‰¡ è¡¨ç¤º] [âŠ ã‚°ãƒªãƒƒãƒ‰] [â†“ åå‰é †] [ğŸ·ï¸ ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼] [45/1234] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 5.1.1 è¡¨ç¤ºåˆ‡æ›¿ãƒœã‚¿ãƒ³

```txt
[â‰¡ è¡¨ç¤ºåˆ‡æ›¿ â–¾]
  â”œâ”€ ã‚°ãƒªãƒƒãƒ‰è¡¨ç¤º  (Ctrl+1)
  â”œâ”€ ãƒªã‚¹ãƒˆè¡¨ç¤º    (Ctrl+2)
  â””â”€ è©³ç´°è¡¨ç¤º      (Ctrl+3)
```

#### 5.1.2 ã‚°ãƒªãƒƒãƒ‰ã‚µã‚¤ã‚ºãƒœã‚¿ãƒ³

```txt
[âŠ ã‚°ãƒªãƒƒãƒ‰ â–¾]
  â”œâ”€ å° (4åˆ— - 160x240px)
  â”œâ”€ ä¸­ (3åˆ— - 232x380px)  â† ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
  â””â”€ å¤§ (2åˆ— - 320x480px)
```

#### 5.1.3 ã‚½ãƒ¼ãƒˆãƒœã‚¿ãƒ³

```txt
[â†“ åå‰é † â–¾]
  â”œâ”€ åå‰ (æ˜‡é †/é™é †)
  â”œâ”€ æ›´æ–°æ—¥æ™‚ (æ˜‡é †/é™é †)
  â”œâ”€ ã‚µã‚¤ã‚º (æ˜‡é †/é™é †)
  â”œâ”€ ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼
  â”œâ”€ ç”»åƒæšæ•° (ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã®ã¿)
  â””â”€ é•·ã• (å‹•ç”»/éŸ³å£°ã®ã¿)
```

#### 5.1.4 ã‚¿ã‚°ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒœã‚¿ãƒ³

```txt
[ğŸ·ï¸ ã‚¿ã‚°ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ â–¾]
  â”œâ”€ ANDæ¤œç´¢ (ã™ã¹ã¦ã®ã‚¿ã‚°ã‚’å«ã‚€) â† ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
  â”œâ”€ ORæ¤œç´¢ (ã„ãšã‚Œã‹ã®ã‚¿ã‚°ã‚’å«ã‚€)
  â””â”€ NOTæ¤œç´¢ (ã‚¿ã‚°ã‚’é™¤å¤–)
```

#### 5.1.5 é¸æŠã‚«ã‚¦ãƒ³ã‚¿ãƒ¼

```txt
é¸æŠ: 45 / 1,234ä»¶
```

### 5.2 ã‚°ãƒªãƒƒãƒ‰è¡¨ç¤º

#### 5.2.1 ãƒ•ã‚¡ã‚¤ãƒ«ã‚«ãƒ¼ãƒ‰ï¼ˆä¸­ã‚µã‚¤ã‚ºï¼‰

```txt
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   â”‚
â”‚                   â”‚
â”‚   [ã‚µãƒ ãƒã‚¤ãƒ«]     â”‚ 200x300px
â”‚   (200x300px)     â”‚
â”‚                   â”‚
â”‚                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“š manga_vol1.zip â”‚ â† ãƒ•ã‚¡ã‚¤ãƒ«åï¼ˆ1è¡Œçœç•¥ï¼‰
â”‚ 50ãƒšãƒ¼ã‚¸ 12.3MB   â”‚ â† ãƒ¡ã‚¿æƒ…å ±
â”‚ ğŸ·ï¸æ¼«ç”» ğŸ·ï¸å®Œçµ     â”‚ â† ã‚¿ã‚°ï¼ˆæœ€å¤§3ã¤ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…¨ä½“ã‚µã‚¤ã‚º:** 232px Ã— 380px

**æ§‹æˆ:**

```typescript
interface FileCardProps {
  file: FileInfo;
  selected: boolean;
  size: 'small' | 'medium' | 'large';
  onSelect: () => void;
  onDoubleClick: () => void;
  onContextMenu: (e: MouseEvent) => void;
}

const FileCard: React.FC<FileCardProps> = ({
  file,
  selected,
  size,
  onSelect,
  onDoubleClick,
  onContextMenu
}) => {
  return (
    <div
      className={`file-card ${size} ${selected ? 'selected' : ''}`}
      onClick={onSelect}
      onDoubleClick={onDoubleClick}
      onContextMenu={onContextMenu}
      draggable
      onDragStart={(e) => handleDragStart(e, file)}
    >
      <div className="thumbnail-container">
        <img
          src={file.thumbnailPath || getDefaultIcon(file.type)}
          alt={`${file.name}ã®ã‚µãƒ ãƒã‚¤ãƒ«`}
          loading="lazy"
        />
        <div className="file-type-badge">
          {getFileTypeIcon(file.type)}
        </div>
        {selected && (
          <div className="selection-overlay">
            <CheckIcon />
          </div>
        )}
      </div>

      <div className="card-content">
        <div className="file-name" title={file.name}>
          {getFileTypeIcon(file.type)} {file.name}
        </div>

        <div className="file-meta">
          {getMetaText(file)}
        </div>

        <div className="file-tags">
          {file.tags.slice(0, 3).map(tag => (
            <TagChip key={tag.id} tag={tag} size="small" />
          ))}
          {file.tags.length > 3 && (
            <span className="more-tags">+{file.tags.length - 3}</span>
          )}
        </div>
      </div>
    </div>
  );
};
```

**ã‚µãƒ ãƒã‚¤ãƒ«è¡¨ç¤º:**

| ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ | ã‚µãƒ ãƒã‚¤ãƒ«å†…å®¹ |
|------------|--------------|
| ZIP | æœ€åˆã®ç”»åƒ |
| å‹•ç”» | æœ€åˆã®ãƒ•ãƒ¬ãƒ¼ãƒ  |
| PDF | æœ€åˆã®ãƒšãƒ¼ã‚¸ |
| ç”»åƒ | ç”»åƒæœ¬ä½“ |
| éŸ³å£° | ã‚¢ãƒ«ãƒãƒ ã‚¢ãƒ¼ãƒˆ or ğŸµã‚¢ã‚¤ã‚³ãƒ³ |

**ãƒ¡ã‚¿æƒ…å ±ã®è¡¨ç¤º:**

```typescript
const getMetaText = (file: FileInfo): string => {
  switch (file.type) {
    case 'archive':
      return `${file.image_count}ãƒšãƒ¼ã‚¸ ${formatSize(file.size)}`;
    case 'video':
    case 'audio':
      return `${formatDuration(file.duration)} ${formatSize(file.size)}`;
    case 'pdf':
      return `${file.page_count}ãƒšãƒ¼ã‚¸ ${formatSize(file.size)}`;
    case 'image':
      return `${file.width}x${file.height} ${formatSize(file.size)}`;
    default:
      return formatSize(file.size);
  }
};
```

**çŠ¶æ…‹è¡¨ç¾:**

| çŠ¶æ…‹ | è¡¨ç¾ |
|-----|------|
| é€šå¸¸ | shadow-sm |
| ãƒ›ãƒãƒ¼ | shadow-hover, translateY(-4px) |
| é¸æŠ | 2px solid primary, ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯è¡¨ç¤º |
| ãƒ‰ãƒ©ãƒƒã‚°ä¸­ | opacity: 0.5 |
| ãƒ•ã‚¡ã‚¤ãƒ«åˆ©ç”¨ä¸å¯ | ã‚°ãƒ¬ãƒ¼ã‚¹ã‚±ãƒ¼ãƒ« + è­¦å‘Šã‚¢ã‚¤ã‚³ãƒ³ |

#### 5.2.2 ã‚°ãƒªãƒƒãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

```css
.file-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(232px, 1fr));
  gap: 16px;
  padding: 16px;
  overflow-y: auto;
}

/* ä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯¾å¿œ */
.file-grid-virtualized {
  /* react-windowä½¿ç”¨ */
}
```

### 5.3 ãƒªã‚¹ãƒˆè¡¨ç¤º

```txt
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [âœ“] â”‚ ãƒ•ã‚¡ã‚¤ãƒ«å       â”‚ å½¢å¼ â”‚ ã‚µã‚¤ã‚º   â”‚ æ›´æ–°æ—¥æ™‚   â”‚ ã‚¿ã‚°   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [âœ“] â”‚ ğŸ“š manga_v1.zip  â”‚ ZIP  â”‚ 12.3 MB  â”‚ 2025-10-01 â”‚ğŸ·ï¸ğŸ·ï¸   â”‚
â”‚ [ ] â”‚ ğŸ¬ video.mp4     â”‚ å‹•ç”» â”‚ 523 MB   â”‚ 2025-09-30 â”‚ğŸ·ï¸     â”‚
â”‚ [ ] â”‚ ğŸ“„ doc.pdf       â”‚ PDF  â”‚ 2.1 MB   â”‚ 2025-09-28 â”‚ğŸ·ï¸ğŸ·ï¸ğŸ·ï¸ â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ã‚«ãƒ©ãƒ å®šç¾©:**

```typescript
interface Column {
  key: string;
  label: string;
  width: number | 'auto';
  sortable: boolean;
  renderer?: (file: FileInfo) => ReactNode;
}

const columns: Column[] = [
  {
    key: 'select',
    label: '',
    width: 40,
    sortable: false,
  },
  {
    key: 'name',
    label: 'ãƒ•ã‚¡ã‚¤ãƒ«å',
    width: 'auto',
    sortable: true,
  },
  {
    key: 'type',
    label: 'å½¢å¼',
    width: 80,
    sortable: true,
  },
  {
    key: 'size',
    label: 'ã‚µã‚¤ã‚º',
    width: 100,
    sortable: true,
  },
  {
    key: 'updated_at',
    label: 'æ›´æ–°æ—¥æ™‚',
    width: 120,
    sortable: true,
  },
  {
    key: 'tags',
    label: 'ã‚¿ã‚°',
    width: 200,
    sortable: false,
  },
];
```

**è¡Œã®é«˜ã•:** 48px

**ãƒ›ãƒãƒ¼/é¸æŠ:**

- ãƒ›ãƒãƒ¼: background-color: hover
- é¸æŠ: background-color: primary(10%)

### 5.4 ç©ºã®çŠ¶æ…‹

```txt
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 â”‚
â”‚          ğŸ“‚                     â”‚
â”‚                                 â”‚
â”‚    ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã›ã‚“          â”‚
â”‚                                 â”‚
â”‚  ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—     â”‚
â”‚  ã¾ãŸã¯                         â”‚
â”‚  [+ ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ]              â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.5 ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹

**ã‚¹ã‚±ãƒ«ãƒˆãƒ³ã‚¹ã‚¯ãƒªãƒ¼ãƒ³:**

```txt
â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”
â”‚â–“â–“â–“â–“â–“â”‚ â”‚â–“â–“â–“â–“â–“â”‚ â”‚â–“â–“â–“â–“â–“â”‚ â”‚â–“â–“â–“â–“â–“â”‚ â† è„ˆå‹•ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
â”‚â–“â–“â–“â–“â–“â”‚ â”‚â–“â–“â–“â–“â–“â”‚ â”‚â–“â–“â–“â–“â–“â”‚ â”‚â–“â–“â–“â–“â–“â”‚
â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜
â–­â–­â–­â–­â–­  â–­â–­â–­â–­â–­  â–­â–­â–­â–­â–­  â–­â–­â–­â–­â–­
```

---

## 6. ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼

```txt
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š 1,234ä»¶ä¸­ 45ä»¶é¸æŠ  åˆè¨ˆ: 2.3GB  [åŒæœŸä¸­...]  [v1.0.0] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ§‹æˆ

**å·¦å´:**

- ãƒ•ã‚¡ã‚¤ãƒ«æ•°: `{total}ä»¶ä¸­ {selected}ä»¶é¸æŠ`
- åˆè¨ˆã‚µã‚¤ã‚º: é¸æŠãƒ•ã‚¡ã‚¤ãƒ«ã®åˆè¨ˆ

**ä¸­å¤®:**

- ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å‡¦ç†çŠ¶æ³
  - ãƒ•ã‚¡ã‚¤ãƒ«ã‚¹ã‚­ãƒ£ãƒ³ä¸­
  - ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆä¸­
  - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æœ€é©åŒ–ä¸­

**å³å´:**

- ã‚¢ãƒ—ãƒªãƒãƒ¼ã‚¸ãƒ§ãƒ³

---

## 7. ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³

### 7.1 ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ

**å˜ä¸€é¸æŠ:**

- ã‚¯ãƒªãƒƒã‚¯: ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ

**è¤‡æ•°é¸æŠ:**

- `Ctrl + ã‚¯ãƒªãƒƒã‚¯`: è¿½åŠ é¸æŠ/é¸æŠè§£é™¤
- `Shift + ã‚¯ãƒªãƒƒã‚¯`: ç¯„å›²é¸æŠ
- `Ctrl + A`: ã™ã¹ã¦é¸æŠ

**é¸æŠçŠ¶æ…‹ã®è¦–è¦šåŒ–:**

```css
.file-card.selected {
  border: 2px solid var(--primary-main);
  box-shadow: 0 0 0 4px var(--primary-main, 0.1);
}

.file-card.selected .selection-overlay {
  display: flex;
  position: absolute;
  top: 8px;
  right: 8px;
  background: var(--primary-main);
  border-radius: 50%;
  width: 24px;
  height: 24px;
}
```

### 7.2 ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—

#### ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¿ã‚°ã«ãƒ‰ãƒ­ãƒƒãƒ—

```typescript
const handleDragStart = (e: DragEvent, file: FileInfo) => {
  e.dataTransfer.effectAllowed = 'copy';
  e.dataTransfer.setData('application/json', JSON.stringify({
    type: 'file',
    files: selectedFiles.includes(file) ? selectedFiles : [file]
  }));
};

const handleTagDrop = (e: DragEvent, tag: Tag) => {
  e.preventDefault();
  const data = JSON.parse(e.dataTransfer.getData('application/json'));

  if (data.type === 'file') {
    addTagsToFiles(data.files, [tag.id]);
  }
};
```

#### å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ­ãƒƒãƒ—

```typescript
const handleFileDrop = (e: DragEvent) => {
  e.preventDefault();
  const files = Array.from(e.dataTransfer.files);
  const paths = files.map(f => f.path);

  openFileAddDialog(paths);
};
```

**ãƒ‰ãƒ­ãƒƒãƒ—ã‚¾ãƒ¼ãƒ³è¡¨ç¤º:**

```css
.drop-zone-active {
  border: 2px dashed var(--primary-main);
  background: var(--primary-main, 0.05);
}

.drop-zone-active::after {
  content: 'ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ­ãƒƒãƒ—';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 24px;
  color: var(--primary-main);
}
```

---

## 8. ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼

### 8.1 ãƒ•ã‚¡ã‚¤ãƒ«ã§ã®å³ã‚¯ãƒªãƒƒã‚¯

```txt
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ“ãƒ¥ãƒ¼ãƒ¯ãƒ¼ã§é–‹ã            â”‚ Enter
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ã§è¡¨ç¤º      â”‚ Ctrl+E
â”‚ ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’ã‚³ãƒ”ãƒ¼        â”‚ Ctrl+Shift+C
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ ã‚¿ã‚°ã‚’ç·¨é›†...              â”‚ Ctrl+T
â”‚   â”” æ¼«ç”»ã‚’è¿½åŠ              â”‚
â”‚   â”” ã‚¤ãƒ©ã‚¹ãƒˆã‚’è¿½åŠ           â”‚
â”‚   â”” æ–°è¦ã‚¿ã‚°...            â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ ãŠæ°—ã«å…¥ã‚Šã«è¿½åŠ             â”‚ Ctrl+D
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ å¤–éƒ¨ã‚¢ãƒ—ãƒªã§é–‹ã            â”‚
â”‚   â”” æ—¢å®šã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ         â”‚
â”‚   â”” ãã®ä»–...              â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±               â”‚ Ctrl+I
â”‚ å‰Šé™¤ï¼ˆç™»éŒ²è§£é™¤ï¼‰           â”‚ Delete
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®Ÿè£…:**

```typescript
interface ContextMenuItem {
  label: string;
  icon?: ReactNode;
  shortcut?: string;
  disabled?: boolean;
  separator?: boolean;
  submenu?: ContextMenuItem[];
  onClick?: () => void;
}

const getFileContextMenu = (file: FileInfo): ContextMenuItem[] => [
  {
    label: 'ãƒ“ãƒ¥ãƒ¼ãƒ¯ãƒ¼ã§é–‹ã',
    icon: <PlayIcon />,
    shortcut: 'Enter',
    onClick: () => openInViewer(file),
  },
  { separator: true },
  {
    label: 'ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ã§è¡¨ç¤º',
    icon: <FolderIcon />,
    shortcut: 'Ctrl+E',
    onClick: () => window.electronAPI.showInExplorer(file.path),
  },
  {
    label: 'ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’ã‚³ãƒ”ãƒ¼',
    icon: <CopyIcon />,
    shortcut: 'Ctrl+Shift+C',
    onClick: () => navigator.clipboard.writeText(file.path),
  },
  { separator: true },
  {
    label: 'ã‚¿ã‚°ã‚’ç·¨é›†...',
    icon: <TagIcon />,
    shortcut: 'Ctrl+T',
    submenu: [
      ...file.availableTags.map(tag => ({
        label: `${tag.name}ã‚’è¿½åŠ `,
        icon: <div style={{
          width: 12,
          height: 12,
          borderRadius: '50%',
          backgroundColor: tag.color
        }} />,
        onClick: () => addTag(file, tag),
      })),
      { separator: true },
      {
        label: 'æ–°è¦ã‚¿ã‚°...',
        icon: <PlusIcon />,
        onClick: () => openNewTagDialog(file),
      },
    ],
  },
  {
    label: file.is_favorite ? 'ãŠæ°—ã«å…¥ã‚Šã‹ã‚‰å‰Šé™¤' : 'ãŠæ°—ã«å…¥ã‚Šã«è¿½åŠ ',
    icon: file.is_favorite ? <StarFilledIcon /> : <StarOutlineIcon />,
    shortcut: 'Ctrl+D',
    onClick: () => toggleFavorite(file),
  },
  { separator: true },
  {
    label: 'å¤–éƒ¨ã‚¢ãƒ—ãƒªã§é–‹ã',
    icon: <ExternalLinkIcon />,
    submenu: [
      {
        label: 'æ—¢å®šã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ',
        onClick: () => window.electronAPI.openExternal(file.path),
      },
      { separator: true },
      {
        label: 'ãã®ä»–...',
        onClick: () => openWithDialog(file),
      },
    ],
  },
  { separator: true },
  {
    label: 'ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±',
    icon: <InfoIcon />,
    shortcut: 'Ctrl+I',
    onClick: () => openFileInfoDialog(file),
  },
  {
    label: 'å‰Šé™¤ï¼ˆç™»éŒ²è§£é™¤ï¼‰',
    icon: <TrashIcon />,
    shortcut: 'Delete',
    onClick: () => confirmRemoveFile(file),
    className: 'danger',
  },
];
```

**ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ:**

```typescript
interface ContextMenuProps {
  x: number;
  y: number;
  items: ContextMenuItem[];
  onClose: () => void;
}

const ContextMenu: React.FC<ContextMenuProps> = ({ x, y, items, onClose }) => {
  const menuRef = useRef<HTMLDivElement>(null);

  // ç”»é¢å¤–ã«å‡ºãªã„ã‚ˆã†ã«èª¿æ•´
  const [position, setPosition] = useState({ x, y });

  useEffect(() => {
    if (menuRef.current) {
      const rect = menuRef.current.getBoundingClientRect();
      const viewportWidth = window.innerWidth;
      const viewportHeight = window.innerHeight;

      let adjustedX = x;
      let adjustedY = y;

      if (x + rect.width > viewportWidth) {
        adjustedX = viewportWidth - rect.width - 8;
      }

      if (y + rect.height > viewportHeight) {
        adjustedY = viewportHeight - rect.height - 8;
      }

      setPosition({ x: adjustedX, y: adjustedY });
    }
  }, [x, y]);

  // å¤–å´ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
  useEffect(() => {
    const handleClickOutside = (e: MouseEvent) => {
      if (menuRef.current && !menuRef.current.contains(e.target as Node)) {
        onClose();
      }
    };

    document.addEventListener('mousedown', handleClickOutside);
    return () => document.removeEventListener('mousedown', handleClickOutside);
  }, [onClose]);

  return (
    <div
      ref={menuRef}
      className="context-menu"
      style={{ left: position.x, top: position.y }}
    >
      {items.map((item, index) => {
        if (item.separator) {
          return <div key={index} className="menu-separator" />;
        }

        return (
          <div
            key={index}
            className={`menu-item ${item.disabled ? 'disabled' : ''} ${item.className || ''}`}
            onClick={() => {
              if (!item.disabled && item.onClick) {
                item.onClick();
                onClose();
              }
            }}
          >
            {item.icon && <span className="menu-icon">{item.icon}</span>}
            <span className="menu-label">{item.label}</span>
            {item.shortcut && (
              <span className="menu-shortcut">{item.shortcut}</span>
            )}
            {item.submenu && <ChevronRightIcon className="menu-arrow" />}
          </div>
        );
      })}
    </div>
  );
};
```

**ã‚¹ã‚¿ã‚¤ãƒ«:**

```css
.context-menu {
  position: fixed;
  background: var(--bg-paper);
  border: 1px solid var(--divider);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  padding: 4px;
  min-width: 220px;
  z-index: 9999;
}

.menu-item {
  display: flex;
  align-items: center;
  padding: 8px 12px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  gap: 8px;
  font-size: 14px;
}

.menu-item:hover:not(.disabled) {
  background: var(--bg-hover);
}

.menu-item.disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.menu-item.danger {
  color: var(--error);
}

.menu-icon {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.menu-label {
  flex: 1;
}

.menu-shortcut {
  font-size: 12px;
  color: var(--text-secondary);
}

.menu-separator {
  height: 1px;
  background: var(--divider);
  margin: 4px 0;
}
```

### 8.2 ã‚¿ã‚°ã§ã®å³ã‚¯ãƒªãƒƒã‚¯

```txt
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã‚¿ã‚°ã‚’ç·¨é›†...              â”‚
â”‚ è‰²ã‚’å¤‰æ›´                   â”‚
â”‚   â”” ğŸ”µ é’                  â”‚
â”‚   â”” ğŸ”´ èµ¤                  â”‚
â”‚   â”” ğŸŸ¢ ç·‘                  â”‚
â”‚   â”” ğŸŸ¡ é»„                  â”‚
â”‚   â”” ãã®ä»–...              â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ ãŠæ°—ã«å…¥ã‚Šã«è¿½åŠ /å‰Šé™¤       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ ã‚µãƒ–ã‚¿ã‚°ã‚’ä½œæˆ              â”‚
â”‚ ã‚¿ã‚°ã‚’ãƒãƒ¼ã‚¸...             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ éš ã—ã‚¿ã‚°ã«è¨­å®š/è§£é™¤         â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ å‰Šé™¤...                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```typescript
const getTagContextMenu = (tag: Tag): ContextMenuItem[] => {
  const colorOptions = [
    { name: 'é’', color: '#1976d2' },
    { name: 'èµ¤', color: '#dc004e' },
    { name: 'ç·‘', color: '#4caf50' },
    { name: 'é»„', color: '#ff9800' },
    { name: 'ç´«', color: '#9c27b0' },
    { name: 'æ©™', color: '#ff5722' },
  ];

  return [
    {
      label: 'ã‚¿ã‚°ã‚’ç·¨é›†...',
      icon: <EditIcon />,
      onClick: () => openTagEditDialog(tag),
    },
    {
      label: 'è‰²ã‚’å¤‰æ›´',
      icon: <PaletteIcon />,
      submenu: [
        ...colorOptions.map(opt => ({
          label: `${opt.name}`,
          icon: <div style={{
            width: 16,
            height: 16,
            borderRadius: '50%',
            backgroundColor: opt.color,
            border: tag.color === opt.color ? '2px solid white' : 'none'
          }} />,
          onClick: () => updateTagColor(tag.id, opt.color),
        })),
        { separator: true },
        {
          label: 'ãã®ä»–...',
          icon: <MoreIcon />,
          onClick: () => openColorPicker(tag),
        },
      ],
    },
    { separator: true },
    {
      label: tag.is_favorite ? 'ãŠæ°—ã«å…¥ã‚Šã‹ã‚‰å‰Šé™¤' : 'ãŠæ°—ã«å…¥ã‚Šã«è¿½åŠ ',
      icon: tag.is_favorite ? <StarFilledIcon /> : <StarOutlineIcon />,
      onClick: () => toggleTagFavorite(tag),
    },
    { separator: true },
    {
      label: 'ã‚µãƒ–ã‚¿ã‚°ã‚’ä½œæˆ',
      icon: <PlusIcon />,
      onClick: () => openNewSubTagDialog(tag),
    },
    {
      label: 'ã‚¿ã‚°ã‚’ãƒãƒ¼ã‚¸...',
      icon: <MergeIcon />,
      onClick: () => openTagMergeDialog(tag),
    },
    { separator: true },
    {
      label: tag.is_hidden ? 'é€šå¸¸ã‚¿ã‚°ã«æˆ»ã™' : 'éš ã—ã‚¿ã‚°ã«è¨­å®š',
      icon: tag.is_hidden ? <EyeIcon /> : <EyeOffIcon />,
      onClick: () => toggleTagHidden(tag),
    },
    { separator: true },
    {
      label: 'å‰Šé™¤...',
      icon: <TrashIcon />,
      onClick: () => confirmDeleteTag(tag),
      className: 'danger',
    },
  ];
};
```

### 8.3 ç©ºç™½ã‚¨ãƒªã‚¢ã§ã®å³ã‚¯ãƒªãƒƒã‚¯

```txt
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ...          â”‚ Ctrl+O
â”‚ ãƒ•ã‚©ãƒ«ãƒ€ã‚’è¿½åŠ ...          â”‚ Ctrl+Shift+O
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ ã™ã¹ã¦é¸æŠ                 â”‚ Ctrl+A
â”‚ é¸æŠã‚’è§£é™¤                 â”‚ Esc
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ è¡¨ç¤ºã‚’æ›´æ–°                 â”‚ F5
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ è¡¨ç¤ºè¨­å®š                   â”‚
â”‚   â”” ã‚°ãƒªãƒƒãƒ‰è¡¨ç¤º           â”‚ Ctrl+1
â”‚   â”” ãƒªã‚¹ãƒˆè¡¨ç¤º             â”‚ Ctrl+2
â”‚   â”” è©³ç´°è¡¨ç¤º               â”‚ Ctrl+3
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```typescript
const getEmptyAreaContextMenu = (): ContextMenuItem[] => [
  {
    label: 'ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ...',
    icon: <FileAddIcon />,
    shortcut: 'Ctrl+O',
    onClick: () => openFileAddDialog(),
  },
  {
    label: 'ãƒ•ã‚©ãƒ«ãƒ€ã‚’è¿½åŠ ...',
    icon: <FolderAddIcon />,
    shortcut: 'Ctrl+Shift+O',
    onClick: () => openFolderAddDialog(),
  },
  { separator: true },
  {
    label: 'ã™ã¹ã¦é¸æŠ',
    icon: <SelectAllIcon />,
    shortcut: 'Ctrl+A',
    onClick: () => selectAllFiles(),
  },
  {
    label: 'é¸æŠã‚’è§£é™¤',
    icon: <DeselectIcon />,
    shortcut: 'Esc',
    onClick: () => deselectAll(),
    disabled: selectedFiles.length === 0,
  },
  { separator: true },
  {
    label: 'è¡¨ç¤ºã‚’æ›´æ–°',
    icon: <RefreshIcon />,
    shortcut: 'F5',
    onClick: () => refreshFileList(),
  },
  { separator: true },
  {
    label: 'è¡¨ç¤ºè¨­å®š',
    icon: <ViewIcon />,
    submenu: [
      {
        label: 'ã‚°ãƒªãƒƒãƒ‰è¡¨ç¤º',
        shortcut: 'Ctrl+1',
        icon: viewMode === 'grid' ? <CheckIcon /> : null,
        onClick: () => setViewMode('grid'),
      },
      {
        label: 'ãƒªã‚¹ãƒˆè¡¨ç¤º',
        shortcut: 'Ctrl+2',
        icon: viewMode === 'list' ? <CheckIcon /> : null,
        onClick: () => setViewMode('list'),
      },
      {
        label: 'è©³ç´°è¡¨ç¤º',
        shortcut: 'Ctrl+3',
        icon: viewMode === 'detail' ? <CheckIcon /> : null,
        onClick: () => setViewMode('detail'),
      },
    ],
  },
];
```

---

## 9. çŠ¶æ…‹ç®¡ç†

### 9.1 ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ï¼ˆZustandï¼‰

```typescript
interface MainScreenState {
  // ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆ
  files: FileInfo[];
  selectedFiles: FileInfo[];
  filteredFiles: FileInfo[];

  // ã‚¿ã‚°
  tags: Tag[];
  selectedTags: number[];
  showHiddenTags: boolean;

  // è¡¨ç¤ºè¨­å®š
  viewMode: 'grid' | 'list' | 'detail';
  gridSize: 'small' | 'medium' | 'large';
  sortBy: SortOption;
  sortOrder: 'asc' | 'desc';

  // æ¤œç´¢
  searchQuery: string;

  // UIçŠ¶æ…‹
  isLoading: boolean;
  sidebarCollapsed: boolean;

  // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
  setFiles: (files: FileInfo[]) => void;
  selectFile: (file: FileInfo, multi?: boolean) => void;
  selectRange: (start: FileInfo, end: FileInfo) => void;
  deselectAll: () => void;

  setSelectedTags: (tagIds: number[]) => void;
  toggleTag: (tagId: number) => void;
  toggleHiddenTags: () => void;

  setViewMode: (mode: ViewMode) => void;
  setGridSize: (size: GridSize) => void;
  setSortBy: (sort: SortOption, order?: SortOrder) => void;

  setSearchQuery: (query: string) => void;

  filterFiles: () => void;
  sortFiles: () => void;
}

const useMainScreenStore = create<MainScreenState>((set, get) => ({
  files: [],
  selectedFiles: [],
  filteredFiles: [],
  tags: [],
  selectedTags: [],
  showHiddenTags: false,
  viewMode: 'grid',
  gridSize: 'medium',
  sortBy: 'name',
  sortOrder: 'asc',
  searchQuery: '',
  isLoading: false,
  sidebarCollapsed: false,

  setFiles: (files) => {
    set({ files });
    get().filterFiles();
  },

  selectFile: (file, multi = false) => {
    const { selectedFiles } = get();

    if (multi) {
      const index = selectedFiles.findIndex(f => f.id === file.id);
      if (index >= 0) {
        set({ selectedFiles: selectedFiles.filter((_, i) => i !== index) });
      } else {
        set({ selectedFiles: [...selectedFiles, file] });
      }
    } else {
      set({ selectedFiles: [file] });
    }
  },

  selectRange: (start, end) => {
    const { files } = get();
    const startIndex = files.findIndex(f => f.id === start.id);
    const endIndex = files.findIndex(f => f.id === end.id);

    const min = Math.min(startIndex, endIndex);
    const max = Math.max(startIndex, endIndex);

    const rangeFiles = files.slice(min, max + 1);
    set({ selectedFiles: rangeFiles });
  },

  deselectAll: () => set({ selectedFiles: [] }),

  toggleTag: (tagId) => {
    const { selectedTags } = get();
    const index = selectedTags.indexOf(tagId);

    if (index >= 0) {
      set({ selectedTags: selectedTags.filter((_, i) => i !== index) });
    } else {
      set({ selectedTags: [...selectedTags, tagId] });
    }

    get().filterFiles();
  },

  toggleHiddenTags: () => {
    set({ showHiddenTags: !get().showHiddenTags });
    get().filterFiles();
  },

  filterFiles: () => {
    const { files, selectedTags, searchQuery, showHiddenTags } = get();

    let filtered = files;

    // ã‚¿ã‚°ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆANDæ¤œç´¢ï¼‰
    if (selectedTags.length > 0) {
      filtered = filtered.filter(file =>
        selectedTags.every(tagId =>
          file.tags.some(tag => tag.id === tagId)
        )
      );
    }

    // éš ã—ã‚¿ã‚°ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
    if (!showHiddenTags) {
      filtered = filtered.filter(file =>
        !file.tags.some(tag => tag.is_hidden)
      );
    }

    // æ¤œç´¢ã‚¯ã‚¨ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
    if (searchQuery) {
      const query = searchQuery.toLowerCase();
      filtered = filtered.filter(file =>
        file.name.toLowerCase().includes(query)
      );
    }

    set({ filteredFiles: filtered });
    get().sortFiles();
  },

  sortFiles: () => {
    const { filteredFiles, sortBy, sortOrder } = get();

    const sorted = [...filteredFiles].sort((a, b) => {
      let comparison = 0;

      switch (sortBy) {
        case 'name':
          comparison = a.name.localeCompare(b.name);
          break;
        case 'date':
          comparison = new Date(a.updated_at).getTime() - new Date(b.updated_at).getTime();
          break;
        case 'size':
          comparison = a.size - b.size;
          break;
        case 'type':
          comparison = a.type.localeCompare(b.type);
          break;
        case 'imageCount':
          comparison = (a.image_count || 0) - (b.image_count || 0);
          break;
        case 'duration':
          comparison = (a.duration || 0) - (b.duration || 0);
          break;
      }

      return sortOrder === 'asc' ? comparison : -comparison;
    });

    set({ filteredFiles: sorted });
  },

  setViewMode: (mode) => set({ viewMode: mode }),
  setGridSize: (size) => set({ gridSize: size }),

  setSortBy: (sort, order) => {
    const currentOrder = get().sortOrder;
    const newOrder = order || (get().sortBy === sort ? (currentOrder === 'asc' ? 'desc' : 'asc') : 'asc');

    set({ sortBy: sort, sortOrder: newOrder });
    get().sortFiles();
  },

  setSearchQuery: (query) => {
    set({ searchQuery: query });
    get().filterFiles();
  },
}));
```

### 9.2 ãƒ­ãƒ¼ã‚«ãƒ«çŠ¶æ…‹ï¼ˆuseStateï¼‰

```typescript
const MainScreen: React.FC = () => {
  // ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼
  const [contextMenu, setContextMenu] = useState<{
    x: number;
    y: number;
    items: ContextMenuItem[];
  } | null>(null);

  // ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—
  const [isDragging, setIsDragging] = useState(false);
  const [dragOverTag, setDragOverTag] = useState<number | null>(null);
  const [draggedFiles, setDraggedFiles] = useState<FileInfo[]>([]);

  // ãƒ›ãƒãƒ¼
  const [hoveredFile, setHoveredFile] = useState<number | null>(null);

  // é¸æŠç¯„å›²
  const [selectionAnchor, setSelectionAnchor] = useState<FileInfo | null>(null);

  // ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
  const [showTagDialog, setShowTagDialog] = useState(false);
  const [showFileAddDialog, setShowFileAddDialog] = useState(false);

  return (
    <div className="main-screen">
      {/* ... */}
    </div>
  );
};
```

### 9.3 ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†ï¼ˆReact Queryï¼‰

```typescript
// ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§
const useFiles = () => {
  return useQuery({
    queryKey: ['files'],
    queryFn: () => window.electronAPI.getFiles(),
    staleTime: 5 * 60 * 1000,
    cacheTime: 10 * 60 * 1000,
  });
};

// ã‚¿ã‚°ä¸€è¦§
const useTags = () => {
  return useQuery({
    queryKey: ['tags'],
    queryFn: () => window.electronAPI.getTags(),
    staleTime: 5 * 60 * 1000,
    refetchOnWindowFocus: true,
  });
};

// æ¤œç´¢
const useSearchFiles = (query: SearchQuery) => {
  return useQuery({
    queryKey: ['search', query],
    queryFn: () => window.electronAPI.searchFiles(query),
    enabled: !!query && (query.tags.length > 0 || !!query.filename),
    staleTime: 1 * 60 * 1000,
  });
};

// ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒŸãƒ¥ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
const useAddFiles = () => {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: (paths: string[]) => window.electronAPI.scanFiles(paths),
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['files'] });
    },
  });
};

const useRemoveFile = () => {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: (fileId: number) => window.electronAPI.removeFile(fileId),
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['files'] });
    },
  });
};

const useAddTagToFile = () => {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: ({ fileId, tagId }: { fileId: number; tagId: number }) =>
      window.electronAPI.addTagToFile(fileId, tagId),
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['files'] });
      queryClient.invalidateQueries({ queryKey: ['tags'] });
    },
  });
};
```

---

## 10. ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ

### 10.1 ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚ºåˆ¥ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

```typescript
const useResponsiveGrid = () => {
  const [columnCount, setColumnCount] = useState(3);

  useEffect(() => {
    const updateColumnCount = () => {
      const width = window.innerWidth - 240; // ã‚µã‚¤ãƒ‰ãƒãƒ¼å¹…ã‚’å¼•ã

      if (width < 1040) {
        setColumnCount(2);
      } else if (width < 1360) {
        setColumnCount(3);
      } else {
        setColumnCount(4);
      }
    };

    updateColumnCount();
    window.addEventListener('resize', updateColumnCount);

    return () => window.removeEventListener('resize', updateColumnCount);
  }, []);

  return columnCount;
};
```

### 10.2 CSS Media Queries

```css
/* å°ï¼ˆ1024px - 1280pxï¼‰: 2åˆ— */
@media (min-width: 1024px) and (max-width: 1280px) {
  .file-grid {
    grid-template-columns: repeat(2, minmax(232px, 1fr));
  }
}

/* ä¸­ï¼ˆ1280px - 1600pxï¼‰: 3åˆ— */
@media (min-width: 1280px) and (max-width: 1600px) {
  .file-grid {
    grid-template-columns: repeat(3, minmax(232px, 1fr));
  }
}

/* å¤§ï¼ˆ1600pxä»¥ä¸Šï¼‰: 4åˆ— */
@media (min-width: 1600px) {
  .file-grid {
    grid-template-columns: repeat(4, minmax(232px, 1fr));
  }
}

/* è¶…å°ï¼ˆæœ€å°å¹…1024pxæœªæº€ã«ã¯å¯¾å¿œã—ãªã„ï¼‰ */
@media (max-width: 1023px) {
  .main-screen {
    min-width: 1024px;
  }
}
```

---

## 11. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### 11.1 ä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«

```typescript
import { FixedSizeGrid } from 'react-window';

const VirtualizedFileGrid: React.FC<{
  files: FileInfo[];
}> = ({ files }) => {
  const columnCount = useResponsiveGrid();
  const rowCount = Math.ceil(files.length / columnCount);

  const columnWidth = 248; // 232px + 16px gap
  const rowHeight = 396;   // 380px + 16px gap

  return (
    <FixedSizeGrid
      columnCount={columnCount}
      columnWidth={columnWidth}
      height={window.innerHeight - 144} // ãƒ˜ãƒƒãƒ€ãƒ¼+ãƒ„ãƒ¼ãƒ«ãƒãƒ¼+ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼
      rowCount={rowCount}
      rowHeight={rowHeight}
      width={window.innerWidth - 240} // ã‚µã‚¤ãƒ‰ãƒãƒ¼å¹…
      overscanRowCount={2}
    >
      {({ columnIndex, rowIndex, style }) => {
        const index = rowIndex * columnCount + columnIndex;
        const file = files[index];

        if (!file) return null;

        return (
          <div style={{ ...style, padding: '8px' }}>
            <FileCard file={file} />
          </div>
        );
      }}
    </FixedSizeGrid>
  );
};
```

### 11.2 ãƒ¡ãƒ¢åŒ–

```typescript
// FileCardã®ãƒ¡ãƒ¢åŒ–
const FileCard = React.memo<FileCardProps>(
  ({ file, selected, onSelect, onDoubleClick }) => {
    return (
      <div className="file-card">
        {/* ... */}
      </div>
    );
  },
  (prevProps, nextProps) => {
    return (
      prevProps.file.id === nextProps.file.id &&
      prevProps.selected === nextProps.selected
    );
  }
);

// ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã®ãƒ¡ãƒ¢åŒ–
const filteredFiles = useMemo(() => {
  return files.filter(file => {
    if (selectedTags.length > 0) {
      return selectedTags.every(tagId =>
        file.tags.some(tag => tag.id === tagId)
      );
    }
    return true;
  });
}, [files, selectedTags]);

// ã‚½ãƒ¼ãƒˆã®ãƒ¡ãƒ¢åŒ–
const sortedFiles = useMemo(() => {
  return [...filteredFiles].sort((a, b) => {
    // ã‚½ãƒ¼ãƒˆãƒ­ã‚¸ãƒƒã‚¯
  });
}, [filteredFiles, sortBy, sortOrder]);
```

### 11.3 ç”»åƒé…å»¶èª­ã¿è¾¼ã¿

```typescript
import { LazyLoadImage } from 'react-lazy-load-image-component';
import 'react-lazy-load-image-component/src/effects/opacity.css';

const ThumbnailImage: React.FC<{
  src: string;
  alt: string;
}> = ({ src, alt }) => {
  return (
    <LazyLoadImage
      src={src}
      alt={alt}
      effect="opacity"
      threshold={200}
      placeholder={
        <Skeleton
          variant="rectangular"
          width={200}
          height={300}
          animation="wave"
        />
      }
      onError={(e) => {
        // ã‚¨ãƒ©ãƒ¼æ™‚ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¢ã‚¤ã‚³ãƒ³ã‚’è¡¨ç¤º
        e.currentTarget.src = '/assets/default-thumbnail.svg';
      }}
    />
  );
};
```

### 11.4 ãƒ‡ãƒã‚¦ãƒ³ã‚¹ãƒ»ã‚¹ãƒ­ãƒƒãƒˆãƒ«

```typescript
import { useDebouncedCallback } from 'use-debounce';

// æ¤œç´¢ã®ãƒ‡ãƒã‚¦ãƒ³ã‚¹
const SearchBar: React.FC = () => {
  const setSearchQuery = useMainScreenStore(state => state.setSearchQuery);

  const debouncedSearch = useDebouncedCallback(
    (value: string) => {
      setSearchQuery(value);
    },
    300
  );

  return (
    <input
      type="text"
      onChange={(e) => debouncedSearch(e.target.value)}
      placeholder="ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œç´¢..."
    />
  );
};

// ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã®ã‚¹ãƒ­ãƒƒãƒˆãƒ«
const useScrollThrottle = (callback: () => void, delay: number) => {
  const throttledCallback = useCallback(
    throttle(callback, delay),
    [callback, delay]
  );

  return throttledCallback;
};
```

---

## 12. ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³

### 12.1 ã‚«ãƒ¼ãƒ‰ãƒ›ãƒãƒ¼

```css
.file-card {
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.file-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-hover);
}

.file-card:active {
  transform: translateY(-2px);
}
```

### 12.2 é¸æŠã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

```css
.file-card.selected {
  animation: selectPulse 0.3s ease-out;
}

@keyframes selectPulse {
  0% {
    transform: scale(1);
    box-shadow: 0 0 0 0 var(--primary-main);
  }
  50% {
    transform: scale(1.02);
    box-shadow: 0 0 0 4px rgba(25, 118, 210, 0.3);
  }
  100% {
    transform: scale(1);
    box-shadow: 0 0 0 4px rgba(25, 118, 210, 0.1);
  }
}
```

### 12.3 ãƒ‰ãƒ©ãƒƒã‚°ä¸­ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

```css
.file-card.dragging {
  opacity: 0.5;
  cursor: grabbing;
  transform: rotate(3deg);
}

.tag-item.drag-over {
  background-color: rgba(25, 118, 210, 0.1);
  border: 2px dashed var(--primary-main);
  animation: dragOverPulse 1s ease-in-out infinite;
}

@keyframes dragOverPulse {
  0%, 100% {
    background-color: rgba(25, 118, 210, 0.05);
  }
  50% {
    background-color: rgba(25, 118, 210, 0.15);
  }
}
```

### 12.4 ãƒªã‚¹ãƒˆæ›´æ–°ã®ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³

```css
.file-list-enter {
  opacity: 0;
  transform: translateY(20px);
}

.file-list-enter-active {
  opacity: 1;
  transform: translateY(0);
  transition: all 0.3s ease-out;
}

.file-list-exit {
  opacity: 1;
}

.file-list-exit-active {
  opacity: 0;
  transform: translateY(-20px);
  transition: all 0.2s ease-in;
}
```

---

## 13. ã‚¨ãƒ©ãƒ¼å‡¦ç†ãƒ»ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹

### 13.1 ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„

```typescript
const FileCard: React.FC<FileCardProps> = ({ file }) => {
  if (!file.is_available) {
    return (
      <div className="file-card unavailable">
        <div className="thumbnail-container">
          <div className="error-overlay">
            <AlertTriangleIcon size={48} />
            <span>ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</span>
          </div>
        </div>
        <div className="card-content">
          <div className="file-name error">{file.name}</div>
          <div className="error-actions">
            <button onClick={() => updateFilePath(file)}>
              ãƒ‘ã‚¹ã‚’æ›´æ–°
            </button>
            <button onClick={() => removeFile(file)}>
              ç™»éŒ²è§£é™¤
            </button>
          </div>
        </div>
      </div>
    );
  }

  return (
    // é€šå¸¸ã®è¡¨ç¤º
  );
};
```

```css
.file-card.unavailable {
  opacity: 0.6;
  filter: grayscale(100%);
}

.error-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.7);
  color: white;
  gap: 8px;
}
```

### 13.2 ã‚µãƒ ãƒã‚¤ãƒ«èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼

```typescript
const ThumbnailImage: React.FC<ThumbnailProps> = ({ file }) => {
  const [error, setError] = useState(false);
  const [loading, setLoading] = useState(true);

  if (error) {
    return (
      <div className="thumbnail-error">
        <BrokenImageIcon size={48} />
        <span>ã‚µãƒ ãƒã‚¤ãƒ«èª­ã¿è¾¼ã¿å¤±æ•—</span>
      </div>
    );
  }

  return (
    <>
      {loading && (
        <Skeleton
          variant="rectangular"
          width={200}
          height={300}
          animation="wave"
        />
      )}
      <img
        src={file.thumbnailPath}
        alt={file.name}
        onLoad={() => setLoading(false)}
        onError={() => {
          setLoading(false);
          setError(true);
        }}
        style={{ display: loading ? 'none' : 'block' }}
      />
    </>
  );
};
```

### 13.3 å¤§é‡é¸æŠæ™‚ã®è­¦å‘Š

```typescript
const handleSelectAll = () => {
  const { files } = useMainScreenStore.getState();

  if (files.length > 1000) {
    showConfirmDialog({
      title: 'å¤§é‡é¸æŠã®ç¢ºèª',
      message: `${files.length.toLocaleString()}ä»¶ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¾ã™ã€‚å‡¦ç†ã«æ™‚é–“ãŒã‹ã‹ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ç¶šè¡Œã—ã¾ã™ã‹ï¼Ÿ`,
      confirmText: 'é¸æŠã™ã‚‹',
      cancelText: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«',
      onConfirm: () => {
        useMainScreenStore.getState().setSelectedFiles(files);
        showNotification({
          type: 'success',
          message: `${files.length.toLocaleString()}ä»¶ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¾ã—ãŸ`,
        });
      },
    });
  } else {
    useMainScreenStore.getState().setSelectedFiles(files);
  }
};
```

### 13.4 ç©ºã®æ¤œç´¢çµæœ

```typescript
const EmptySearchResult: React.FC = () => {
  const searchQuery = useMainScreenStore(state => state.searchQuery);
  const selectedTags = useMainScreenStore(state => state.selectedTags);

  return (
    <div className="empty-search-result">
      <SearchOffIcon size={64} />
      <h3>ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</h3>
      <p>æ¤œç´¢æ¡ä»¶ã«ä¸€è‡´ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã›ã‚“</p>

      {searchQuery && (
        <div className="search-info">
          æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: <strong>{searchQuery}</strong>
        </div>
      )}

      {selectedTags.length > 0 && (
        <div className="tag-info">
          é¸æŠä¸­ã®ã‚¿ã‚°: {selectedTags.length}å€‹
        </div>
      )}

      <div className="empty-actions">
        <button onClick={() => {
          useMainScreenStore.getState().setSearchQuery('');
          useMainScreenStore.getState().setSelectedTags([]);
        }}>
          æ¡ä»¶ã‚’ã‚¯ãƒªã‚¢
        </button>
      </div>
    </div>
  );
};
```

---

## 14. ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£

### 14.1 ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³

```typescript
const useKeyboardNavigation = () => {
  const { files, selectedFiles, selectFile, selectRange } = useMainScreenStore();
  const [focusedIndex, setFocusedIndex] = useState(0);

  useEffect(() => {
    const handleKeyDown = (e: KeyboardEvent) => {
      const columnCount = getColumnCount();

      switch (e.key) {
        case 'ArrowRight':
          e.preventDefault();
          setFocusedIndex(prev => Math.min(prev + 1, files.length - 1));
          break;

        case 'ArrowLeft':
          e.preventDefault();
          setFocusedIndex(prev => Math.max(prev - 1, 0));
          break;

        case 'ArrowDown':
          e.preventDefault();
          setFocusedIndex(prev =>
            Math.min(prev + columnCount, files.length - 1)
          );
          break;

        case 'ArrowUp':
          e.preventDefault();
          setFocusedIndex(prev => Math.max(prev - columnCount, 0));
          break;

        case 'Enter':
          if (files[focusedIndex]) {
            openInViewer(files[focusedIndex]);
          }
          break;

        case ' ':
          e.preventDefault();
          if (files[focusedIndex]) {
            if (e.shiftKey) {
              // Shift+Space: ç¯„å›²é¸æŠ
              const lastSelected = selectedFiles[selectedFiles.length - 1];
              if (lastSelected) {
                selectRange(lastSelected, files[focusedIndex]);
              }
            } else {
              // Space: ãƒˆã‚°ãƒ«é¸æŠ
              selectFile(files[focusedIndex], true);
            }
          }
          break;

        case 'a':
          if (e.ctrlKey) {
            e.preventDefault();
            selectAllFiles();
          }
          break;

        case 'Escape':
          deselectAll();
          break;
      }
    };

    window.addEventListener('keydown', handleKeyDown);
    return () => window.removeEventListener('keydown', handleKeyDown);
  }, [files, focusedIndex, selectedFiles]);

  return focusedIndex;
};
```

### 14.2 ARIAå±æ€§

```tsx
const FileGrid: React.FC = () => {
  const files = useMainScreenStore(state => state.filteredFiles);
  const selectedFiles = useMainScreenStore(state => state.selectedFiles);

  return (
    <div
      role="grid"
      aria-label="ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§"
      aria-rowcount={files.length}
      aria-multiselectable="true"
    >
      {files.map((file, index) => (
        <div
          key={file.id}
          role="gridcell"
          aria-label={`${file.name}, ${getMetaText(file)}, ${file.tags.length}å€‹ã®ã‚¿ã‚°`}
          aria-selected={selectedFiles.some(f => f.id === file.id)}
          aria-posinset={index + 1}
          aria-setsize={files.length}
          tabIndex={0}
        >
          <FileCard file={file} />
        </div>
      ))}
    </div>
  );
};
```

### 14.3 ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç†

```typescript
const FileCard = React.forwardRef<HTMLDivElement, FileCardProps>(
  ({ file, selected, onSelect, onDoubleClick }, ref) => {
    const cardRef = useRef<HTMLDivElement>(null);

    // é¸æŠæ™‚ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
    useEffect(() => {
      if (selected && cardRef.current) {
        cardRef.current.scrollIntoView({
          behavior: 'smooth',
          block: 'nearest',
        });
      }
    }, [selected]);

    return (
      <div
        ref={cardRef}
        className={`file-card ${selected ? 'selected' : ''}`}
        tabIndex={0}
        role="button"
        aria-pressed={selected}
        onClick={onSelect}
        onDoubleClick={onDoubleClick}
        onKeyDown={(e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            onSelect();
          }
        }}
      >
        {/* ã‚«ãƒ¼ãƒ‰å†…å®¹ */}
      </div>
    );
  }
);
```

### 14.4 ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œ

```tsx
// ãƒ©ã‚¤ãƒ–ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã§çŠ¶æ…‹å¤‰åŒ–ã‚’é€šçŸ¥
const SearchStatus: React.FC = () => {
  const filteredFiles = useMainScreenStore(state => state.filteredFiles);
  const selectedFiles = useMainScreenStore(state => state.selectedFiles);

  return (
    <div
      role="status"
      aria-live="polite"
      aria-atomic="true"
      className="sr-only"
    >
      {filteredFiles.length}ä»¶ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¡¨ç¤ºä¸­ã€‚
      {selectedFiles.length > 0 && `${selectedFiles.length}ä»¶é¸æŠä¸­ã€‚`}
    </div>
  );
};

// ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å°‚ç”¨ãƒ†ã‚­ã‚¹ãƒˆ
const styles = `
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}
`;
```

---

## 15. å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### Phase 1: åŸºæœ¬è¡¨ç¤ºï¼ˆWeek 3-4ï¼‰

- [ ] ãƒ˜ãƒƒãƒ€ãƒ¼ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå®Ÿè£…
- [ ] æ¤œç´¢ãƒãƒ¼ã®å®Ÿè£…
- [ ] ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®åŸºæœ¬æ§‹é€ 
- [ ] ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚»ã‚¹ã®å®Ÿè£…
- [ ] ã‚¿ã‚°ä¸€è¦§ã®è¡¨ç¤º
- [ ] ã‚°ãƒªãƒƒãƒ‰è¡¨ç¤ºã®å®Ÿè£…
- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ã‚«ãƒ¼ãƒ‰ã®è¡¨ç¤º
- [ ] ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ã®å®Ÿè£…

### Phase 2: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆWeek 5-6ï¼‰

- [ ] ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠæ©Ÿèƒ½ï¼ˆå˜ä¸€/è¤‡æ•°/ç¯„å›²ï¼‰
- [ ] ã‚¿ã‚°ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- [ ] ã‚¿ã‚°æ¤œç´¢æ©Ÿèƒ½
- [ ] ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½
- [ ] æ¤œç´¢æ©Ÿèƒ½ï¼ˆãƒ‡ãƒã‚¦ãƒ³ã‚¹ï¼‰
- [ ] ã‚°ãƒªãƒƒãƒ‰ã‚µã‚¤ã‚ºå¤‰æ›´
- [ ] ãƒªã‚¹ãƒˆè¡¨ç¤ºã®å®Ÿè£…

### Phase 3: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆWeek 7ï¼‰

- [ ] ãƒ•ã‚¡ã‚¤ãƒ«å³ã‚¯ãƒªãƒƒã‚¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼
- [ ] ã‚¿ã‚°å³ã‚¯ãƒªãƒƒã‚¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼
- [ ] ç©ºç™½ã‚¨ãƒªã‚¢å³ã‚¯ãƒªãƒƒã‚¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼
- [ ] ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®å®Ÿè£…
- [ ] ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä½ç½®èª¿æ•´ï¼ˆç”»é¢å¤–å¯¾å¿œï¼‰

### Phase 4: ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ï¼ˆWeek 8ï¼‰

- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¿ã‚°ã«ãƒ‰ãƒ­ãƒƒãƒ—
- [ ] å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‰ãƒ­ãƒƒãƒ—
- [ ] ãƒ‰ãƒ©ãƒƒã‚°ä¸­ã®è¦–è¦šãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
- [ ] ãƒ‰ãƒ­ãƒƒãƒ—ã‚¾ãƒ¼ãƒ³ã®è¡¨ç¤º

### Phase 5: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ï¼ˆWeek 9ï¼‰

- [ ] ä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã®å®Ÿè£…
- [ ] ç”»åƒé…å»¶èª­ã¿è¾¼ã¿
- [ ] React.memoã«ã‚ˆã‚‹æœ€é©åŒ–
- [ ] useMemoã§ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æœ€é©åŒ–
- [ ] ãƒ‡ãƒã‚¦ãƒ³ã‚¹ãƒ»ã‚¹ãƒ­ãƒƒãƒˆãƒ«

### Phase 6: ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ï¼ˆWeek 10ï¼‰

- [ ] ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] ARIAå±æ€§ã®è¿½åŠ 
- [ ] ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç†
- [ ] ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œ
- [ ] ãƒ©ã‚¤ãƒ–ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã®å®Ÿè£…

### Phase 7: ã‚¨ãƒ©ãƒ¼å‡¦ç†ï¼ˆWeek 11ï¼‰

- [ ] ãƒ•ã‚¡ã‚¤ãƒ«æœªæ¤œå‡ºã®å‡¦ç†
- [ ] ã‚µãƒ ãƒã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã®å‡¦ç†
- [ ] ç©ºã®çŠ¶æ…‹ã®è¡¨ç¤º
- [ ] å¤§é‡é¸æŠã®è­¦å‘Š
- [ ] ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã®å‡¦ç†

### Phase 8: ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆWeek 12ï¼‰

- [ ] ãƒ›ãƒãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] é¸æŠã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] ãƒ‰ãƒ©ãƒƒã‚°ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] ãƒªã‚¹ãƒˆæ›´æ–°ã®ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³

---

## 16. ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

### 16.1 ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ

```typescript
describe('File Selection', () => {
  it('å˜ä¸€é¸æŠ', () => {
    // ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¯ãƒªãƒƒã‚¯
    // é¸æŠçŠ¶æ…‹ã«ãªã‚‹ã“ã¨ã‚’ç¢ºèª
  });

  it('è¤‡æ•°é¸æŠï¼ˆCtrl+ã‚¯ãƒªãƒƒã‚¯ï¼‰', () => {
    // CtrlæŠ¼ã—ãªãŒã‚‰è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã‚¯ãƒªãƒƒã‚¯
    // ã™ã¹ã¦é¸æŠã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
  });

  it('ç¯„å›²é¸æŠï¼ˆShift+ã‚¯ãƒªãƒƒã‚¯ï¼‰', () => {
    // æœ€åˆã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¯ãƒªãƒƒã‚¯
    // ShiftæŠ¼ã—ãªãŒã‚‰åˆ¥ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¯ãƒªãƒƒã‚¯
    // é–“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚é¸æŠã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
  });

  it('ã™ã¹ã¦é¸æŠï¼ˆCtrl+Aï¼‰', () => {
    // Ctrl+Aã‚­ãƒ¼
    // ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒé¸æŠã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
  });
});
```

### 16.2 ã‚¿ã‚°ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

```typescript
describe('Tag Filtering', () => {
  it('å˜ä¸€ã‚¿ã‚°ã§ãƒ•ã‚£ãƒ«ã‚¿', () => {
    // ã‚¿ã‚°ã‚’é¸æŠ
    // è©²å½“ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
  });

  it('è¤‡æ•°ã‚¿ã‚°ã§ANDæ¤œç´¢', () => {
    // è¤‡æ•°ã‚¿ã‚°ã‚’é¸æŠ
    // ã™ã¹ã¦ã®ã‚¿ã‚°ã‚’å«ã‚€ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿è¡¨ç¤º
  });

  it('éš ã—ã‚¿ã‚°ã®è¡¨ç¤ºåˆ‡æ›¿', () => {
    // éš ã—ã‚¿ã‚°è¡¨ç¤ºã‚’ON
    // éš ã—ã‚¿ã‚°ä»˜ããƒ•ã‚¡ã‚¤ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹
    // OFF ã«ã™ã‚‹ã¨éè¡¨ç¤ºã«ãªã‚‹
  });
});
```

### 16.3 ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—

```typescript
describe('Drag and Drop', () => {
  it('ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¿ã‚°ã«ãƒ‰ãƒ­ãƒƒãƒ—', () => {
    // ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ©ãƒƒã‚°é–‹å§‹
    // ã‚¿ã‚°ã®ä¸Šã§ãƒ‰ãƒ­ãƒƒãƒ—
    // ã‚¿ã‚°ãŒä»˜ä¸ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
  });

  it('å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ­ãƒƒãƒ—', () => {
    // å¤–éƒ¨ã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ­ãƒƒãƒ—
    // ãƒ•ã‚¡ã‚¤ãƒ«è¿½åŠ ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒé–‹ã
  });
});
```
