# 優先度別リスト（更新：残作業の精査）

※ 現在の実装状況を反映して未完了／追加すべきタスクを明確化しました。短期で対応優先度が高いものを上に並べています。

🔴 最優先（Phase1で必須・未完了 or 要検討）

1. PDFビューワー設計書（未完）
   - 受け入条件: ページナビ／拡大縮小／印刷／テキスト選択の要件を決定。PDF.js 採用可否検討。
   - 見積: 2–4日（設計＋簡易実装：1–2日）
2. 画像ビューワー設計書（部分実装済）
   - 必要: 高解像度表示、ズーム・パン、回転、メタデータ表示、キーボード操作設計。
   - 見積: 1–3日
3. 統合ビューワー切替ロジック（未完）
   - 条件: 拡張子判定ルール、優先表示順（画像→PDF→動画→音声→外部）を明確化。
   - 見積: 0.5–1日（実装調整含む）
4. タグ編集ダイアログ（簡易実装あり → 完成必要）
   - 必要: タグの作成・削除・カラー編集、複数タグ付与UI、ファイル側でのタグ付けUX。
   - 見積: 1–2日
5. ファイル情報ダイアログ（未実装）
   - 必要: メタ（path/size/type/created/updated/tags/thumbnail path）表示。
   - 見積: 0.5–1日
6. マイグレーション整備・FTS インデックス確認（部分実装済）
   - 必要: 001_init.sql の確定、起動時の FTS インデックス更新の回避チェック、dist に含める手順。
   - 見積: 1–2日

🟡 高優先度（Phase1推奨）

1. キャッシュ管理（TTL / サイズ上限 / 手動クリア） — 必須機能（未実装）
2. サムネイル生成並列度／設定の UI 連動（未実装）
3. ビューワ：キーボード操作（次/前/閉じる）・フルスクリーン（未実装）
4. エラー表示の統一（Renderer 側トースト/モーダル）
5. 初回起動ウィザード（DB 初期化／フォルダ登録）

🟢 中優先度（Phase2）

1. 保存済み検索 UI の完成（保存／編集／削除）
2. 検索結果ハイライト（FTS 検索語の強調表示）
3. ドラッグ&ドロップのビジュアルフィードバック詳細
4. 設定画面（アプリ全体の設定項目追加）

🔵 低優先度（Phase2-3）

1. 自動タグ付け（AI/ルール）
2. 重複検出（pHash 等）
3. OCR／メタデータ強化
4. 統計・分析画面、CIの拡張（Windows実行安定化）

---

## 現在「完了」または「動作確認済み」項目（参照）

- preload の contextBridge（基本 API を公開）
- thumbnail generation の IPC（start/progress/get-paths）および dev-simulate 実装（開発用）
- Renderer 基本 UI：ThumbnailGrid / FileList / TagManager / SearchBar / Viewer（簡易）
- tags リポジトリと基本的なタグ CRUD + search-files IPC（FTS 利用）
- 新ウィンドウでの Viewer 起動 IPC（open-viewer）

---

## 優先対応（次のアクション — 推奨順）

1. PDF ビューワー設計書作成 → 簡易実装（PDF.js を使ったビューアをまず追加）
2. FTS とマイグレーションの整合性確認 → 001_init.sql を確定し起動時ログで検証
3. キャッシュ管理の実装（disk size limit, TTL, manual clear API + UI）
4. ビューワのキーボード操作とフルスクリーン対応の追加
5. タグ編集ダイアログの完成・ファイルへのタグ付けフロー修正

---

## 付記（運用・開発上の注意）

- まずは「PDF ビューワ＋FTS/マイグレーションの安定化」を行うと Phase1 の残り作業が進めやすくなります。
- 優先タスクは短期で分割可能な粒度（0.5–2日）にして Issue 化してください。必要なら自動で Issue マークダウンを生成します。

---

更新者: GitHub Copilot（要確認）
