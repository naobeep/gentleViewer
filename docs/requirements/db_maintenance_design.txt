# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ç”»é¢ è¨­è¨ˆæ›¸

## ç›®æ¬¡

1. [æ¦‚è¦](#1-æ¦‚è¦)
2. [ç”»é¢æ§‹æˆ](#2-ç”»é¢æ§‹æˆ)
3. [ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ©Ÿèƒ½](#3-ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ©Ÿèƒ½)
4. [ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å¾©å…ƒ](#4-ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å¾©å…ƒ)
5. [ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯](#5-ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯)
6. [çµ±è¨ˆæƒ…å ±](#6-çµ±è¨ˆæƒ…å ±)

---

## 1. æ¦‚è¦

### 1.1 ç›®çš„

ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å¥å…¨æ€§ã‚’ä¿ã¡ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æœ€é©åŒ–ã™ã‚‹ãŸã‚ã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ã€‚

### 1.2 ä¸»è¦æ©Ÿèƒ½

- **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å¾©å…ƒ**: ãƒ‡ãƒ¼ã‚¿ã®å®‰å…¨ãªä¿å­˜ã¨å¾©æ—§
- **æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯**: ãƒ‡ãƒ¼ã‚¿ã®ä¸æ•´åˆæ¤œå‡ºã¨ä¿®å¾©
- **æœ€é©åŒ–**: VACUUMã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æœ€é©åŒ–
- **çµ±è¨ˆæƒ…å ±**: ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä½¿ç”¨çŠ¶æ³ã®å¯è¦–åŒ–
- **ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—**: ä¸è¦ãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤

---

## 2. ç”»é¢æ§‹æˆ

### 2.1 å…¨ä½“ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

```txt
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚ [æ¦‚è¦] [ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—] [æ•´åˆæ€§] [æœ€é©åŒ–] [çµ±è¨ˆ] [è©³ç´°]   â”‚
â”‚                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚              å„ã‚¿ãƒ–ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„                      â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚ [é–‰ã˜ã‚‹]                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ¦‚è¦ã‚¿ãƒ–

```txt
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¦‚è¦                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚ ğŸ“Š åŸºæœ¬æƒ…å ±                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«: main.db                        â”‚ â”‚
â”‚ â”‚ ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º: 245.8 MB                             â”‚ â”‚
â”‚ â”‚ æœ€çµ‚æ›´æ–°: 2025-10-05 14:32:15                       â”‚ â”‚
â”‚ â”‚ ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 3.0                                      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚ ğŸ“ˆ ãƒ‡ãƒ¼ã‚¿çµ±è¨ˆ                                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ç·ãƒ•ã‚¡ã‚¤ãƒ«æ•°: 1,234 ä»¶                               â”‚ â”‚
â”‚ â”‚ ç·ã‚¿ã‚°æ•°: 87 ä»¶                                      â”‚ â”‚
â”‚ â”‚ ã‚¿ã‚°ä»˜ä¸æ•°: 3,456 ä»¶                                 â”‚ â”‚
â”‚ â”‚ ã‚µãƒ ãƒã‚¤ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥: 892.3 MB                       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚ âš ï¸ æ¨å¥¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ âœ“ å‰å›ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—: 3æ—¥å‰                            â”‚ â”‚
â”‚ â”‚ âš  æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯: å®Ÿè¡Œæ¨å¥¨ (30æ—¥çµŒé)               â”‚ â”‚
â”‚ â”‚ âš  ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æœ€é©åŒ–: å®Ÿè¡Œæ¨å¥¨ (15æ—¥çµŒé)           â”‚ â”‚
â”‚ â”‚ âœ“ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—: æ˜¨æ—¥å®Ÿè¡Œæ¸ˆã¿             â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚ [ã‚¯ã‚¤ãƒƒã‚¯ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹å®Ÿè¡Œ]                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¿ãƒ–

```txt
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å¾©å…ƒ                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚ ğŸ’¾ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ä¿å­˜å…ˆ: C:\Users\...\GentleViewer\backups           â”‚ â”‚
â”‚ â”‚                                        [å‚ç…§...]     â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚ â˜‘ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«                               â”‚ â”‚
â”‚ â”‚ â˜‘ è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«                                       â”‚ â”‚
â”‚ â”‚ â˜ ã‚µãƒ ãƒã‚¤ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ (892 MB)                      â”‚ â”‚
â”‚ â”‚ â˜ ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«                                       â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚ æ¨å®šãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚µã‚¤ã‚º: 245.8 MB                     â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚                      [ä»Šã™ããƒãƒƒã‚¯ã‚¢ãƒƒãƒ—]            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚ ğŸ“¦ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å±¥æ­´                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 2025-10-05 14:30  manual     245.8 MB  [å¾©å…ƒ][å‰Šé™¤] â”‚ â”‚
â”‚ â”‚ 2025-10-02 03:00  auto       243.1 MB  [å¾©å…ƒ][å‰Šé™¤] â”‚ â”‚
â”‚ â”‚ 2025-09-29 03:00  auto       241.5 MB  [å¾©å…ƒ][å‰Šé™¤] â”‚ â”‚
â”‚ â”‚ 2025-09-26 03:00  auto       238.9 MB  [å¾©å…ƒ][å‰Šé™¤] â”‚ â”‚
â”‚ â”‚ 2025-09-23 03:00  auto       236.2 MB  [å¾©å…ƒ][å‰Šé™¤] â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚ âš™ï¸ è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—è¨­å®š                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â˜‘ è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’æœ‰åŠ¹åŒ–                           â”‚ â”‚
â”‚ â”‚ é »åº¦: [æ¯æ—¥ 3:00 AM â–¾]                               â”‚ â”‚
â”‚ â”‚ ä¿æŒæœŸé–“: [30æ—¥é–“ â–¾]                                 â”‚ â”‚
â”‚ â”‚ æœ€å¤§ä¿å­˜æ•°: [10å€‹ â–¾]                                 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.4 æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯ã‚¿ãƒ–

```txt
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚ ğŸ” ãƒã‚§ãƒƒã‚¯é …ç›®                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â˜‘ ãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ç¢ºèª                                 â”‚ â”‚
â”‚ â”‚ â˜‘ å­¤ç«‹ã‚¿ã‚°ã®æ¤œå‡º                                     â”‚ â”‚
â”‚ â”‚ â˜‘ é‡è¤‡ã‚¨ãƒ³ãƒˆãƒªã®æ¤œå‡º                                 â”‚ â”‚
â”‚ â”‚ â˜‘ å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã®æ¤œè¨¼                                 â”‚ â”‚
â”‚ â”‚ â˜‘ ã‚µãƒ ãƒã‚¤ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®æ•´åˆæ€§                       â”‚ â”‚
â”‚ â”‚ â˜‘ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã®æ¤œè¨¼                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚ [ãƒã‚§ãƒƒã‚¯é–‹å§‹]                                           â”‚
â”‚                                                         â”‚
â”‚ ğŸ“‹ ãƒã‚§ãƒƒã‚¯çµæœ                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ æœ€çµ‚ãƒã‚§ãƒƒã‚¯: 2025-09-05 10:23:45                   â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚ âœ“ ãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ç¢ºèª: 1,234ä»¶ä¸­1,234ä»¶OK              â”‚ â”‚
â”‚ â”‚ âš  å­¤ç«‹ã‚¿ã‚°: 3ä»¶æ¤œå‡º                                  â”‚ â”‚
â”‚ â”‚   - ã€Œæœªåˆ†é¡ã€ (ä½¿ç”¨ãƒ•ã‚¡ã‚¤ãƒ«: 0)                     â”‚ â”‚
â”‚ â”‚   - ã€Œãƒ†ã‚¹ãƒˆã€ (ä½¿ç”¨ãƒ•ã‚¡ã‚¤ãƒ«: 0)                     â”‚ â”‚
â”‚ â”‚   - ã€Œå¤ã„ã‚¿ã‚°ã€ (ä½¿ç”¨ãƒ•ã‚¡ã‚¤ãƒ«: 0)                   â”‚ â”‚
â”‚ â”‚   [å‰Šé™¤] [ä¿æŒ]                                      â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚ âœ— åˆ©ç”¨ä¸å¯ãƒ•ã‚¡ã‚¤ãƒ«: 5ä»¶æ¤œå‡º                          â”‚ â”‚
â”‚ â”‚   - old_archive.zip (ãƒ‘ã‚¹ãŒç„¡åŠ¹)                    â”‚ â”‚
â”‚ â”‚   - deleted_video.mp4 (ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªã„)        â”‚ â”‚
â”‚ â”‚   - moved_file.pdf (ãƒ‘ã‚¹ãŒå¤‰æ›´ã•ã‚ŒãŸ)               â”‚ â”‚
â”‚ â”‚   [è©³ç´°ã‚’è¡¨ç¤º...] [DBã‹ã‚‰å‰Šé™¤]                       â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚ âœ“ å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„: å•é¡Œãªã—                             â”‚ â”‚
â”‚ â”‚ âœ“ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ: æ­£å¸¸                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚ [å•é¡Œã‚’è‡ªå‹•ä¿®å¾©]                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.5 æœ€é©åŒ–ã‚¿ãƒ–

```txt
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æœ€é©åŒ–                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚ ğŸš€ æœ€é©åŒ–ã‚ªãƒ—ã‚·ãƒ§ãƒ³                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ VACUUM (ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å†æ§‹ç¯‰)                          â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â”‚ æ–­ç‰‡åŒ–ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’æ•´ç†ã—ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã‚’å‰Šæ¸›   â”‚ â”‚
â”‚ â”‚ â”‚ æ¨å®šåŠ¹æœ: 24.5 MBå‰Šæ¸› (10%å‰Šæ¸›)                   â”‚ â”‚
â”‚ â”‚ â”‚ æ¨å®šæ™‚é–“: ç´„2åˆ†                                   â”‚ â”‚
â”‚ â”‚ â”‚                                                   â”‚ â”‚
â”‚ â”‚ â”‚ [VACUUMå®Ÿè¡Œ]                                      â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚ ANALYZE (çµ±è¨ˆæƒ…å ±æ›´æ–°)                               â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â”‚ ã‚¯ã‚¨ãƒªãƒ—ãƒ©ãƒ³ãƒŠãƒ¼ã®çµ±è¨ˆã‚’æ›´æ–°ã—ã€æ¤œç´¢é€Ÿåº¦ã‚’æ”¹å–„     â”‚ â”‚
â”‚ â”‚ â”‚ æ¨å®šæ™‚é–“: ç´„30ç§’                                  â”‚ â”‚
â”‚ â”‚ â”‚                                                   â”‚ â”‚
â”‚ â”‚ â”‚ [ANALYZEå®Ÿè¡Œ]                                     â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚ REINDEX (ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹å†æ§‹ç¯‰)                         â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â”‚ ã™ã¹ã¦ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å†æ§‹ç¯‰ã—ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š â”‚ â”‚
â”‚ â”‚ â”‚ æ¨å®šæ™‚é–“: ç´„1åˆ†                                   â”‚ â”‚
â”‚ â”‚ â”‚                                                   â”‚ â”‚
â”‚ â”‚ â”‚ [REINDEXå®Ÿè¡Œ]                                     â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚ ğŸ—‘ï¸ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ã‚µãƒ ãƒã‚¤ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥: 892.3 MB                       â”‚ â”‚
â”‚ â”‚ â˜‘ 30æ—¥ä»¥ä¸Šæœªä½¿ç”¨ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å‰Šé™¤                   â”‚ â”‚
â”‚ â”‚ â˜‘ å‰Šé™¤ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å‰Šé™¤               â”‚ â”‚
â”‚ â”‚ æ¨å®šå‰Šæ¸›: 145.6 MB                                   â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚ [ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Ÿè¡Œ]                       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚ ğŸ“Š æœ€é©åŒ–å±¥æ­´                                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 2025-09-20 15:30  VACUUM    å‰Šæ¸›: 28.3 MB          â”‚ â”‚
â”‚ â”‚ 2025-09-20 15:32  ANALYZE   å®Œäº†                    â”‚ â”‚
â”‚ â”‚ 2025-09-05 10:15  VACUUM    å‰Šæ¸›: 31.7 MB          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.6 çµ±è¨ˆã‚¿ãƒ–

```txt
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸çµ±è¨ˆ                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚ ğŸ’¾ ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä½¿ç”¨çŠ¶æ³                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚  ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹   [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 245.8 MB (21%)         â”‚ â”‚
â”‚ â”‚  ã‚µãƒ ãƒã‚¤ãƒ«     [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 892.3 MB (76%) â”‚ â”‚
â”‚ â”‚  ãƒ­ã‚°          [â–ˆâ–‘] 12.4 MB (1%)                    â”‚ â”‚
â”‚ â”‚  è¨­å®š          [â–‘] 2.1 MB (0%)                      â”‚ â”‚
â”‚ â”‚  ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—   [â–ˆâ–ˆâ–‘] 98.7 MB (8%)                  â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚  åˆè¨ˆ: 1.22 GB                                      â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚            [å††ã‚°ãƒ©ãƒ•è¡¨ç¤º]                            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚ ğŸ“Š ãƒ†ãƒ¼ãƒ–ãƒ«çµ±è¨ˆ                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ãƒ†ãƒ¼ãƒ–ãƒ«å        ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°    ã‚µã‚¤ã‚º    ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹â”‚ â”‚
â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚ â”‚ files            1,234ä»¶      180.5 MB   45.2 MB   â”‚ â”‚
â”‚ â”‚ tags                87ä»¶        1.2 MB    0.3 MB   â”‚ â”‚
â”‚ â”‚ file_tags        3,456ä»¶       12.8 MB    8.1 MB   â”‚ â”‚
â”‚ â”‚ bookmarks          234ä»¶        2.3 MB    0.8 MB   â”‚ â”‚
â”‚ â”‚ viewer_settings    156ä»¶        1.5 MB    0.4 MB   â”‚ â”‚
â”‚ â”‚ saved_searches      12ä»¶        0.1 MB    0.0 MB   â”‚ â”‚
â”‚ â”‚ settings            23ä»¶        0.0 MB    0.0 MB   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚ ğŸ“ˆ æˆé•·ãƒˆãƒ¬ãƒ³ãƒ‰ (éå»30æ—¥)                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                     â•±                               â”‚ â”‚
â”‚ â”‚                   â•±                                 â”‚ â”‚
â”‚ â”‚                 â•±                                   â”‚ â”‚
â”‚ â”‚               â•±                                     â”‚ â”‚
â”‚ â”‚             â•±                                       â”‚ â”‚
â”‚ â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                 â”‚ â”‚
â”‚ â”‚   9/5    9/12   9/19   9/26   10/3                 â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚ ãƒ•ã‚¡ã‚¤ãƒ«æ•°: +234ä»¶ (+23%)                            â”‚ â”‚
â”‚ â”‚ DB ã‚µã‚¤ã‚º: +45.6MB (+22%)                           â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ©Ÿèƒ½

### 3.1 å®Ÿè£…

#### 3.1.1 å‹å®šç¾©

```typescript
interface DatabaseInfo {
  path: string;
  size: number;
  lastModified: Date;
  version: string;
}

interface DatabaseStats {
  totalFiles: number;
  totalTags: number;
  totalTagAssignments: number;
  thumbnailCacheSize: number;
  logSize: number;
  backupSize: number;
}

interface MaintenanceStatus {
  lastBackup: Date | null;
  lastIntegrityCheck: Date | null;
  lastOptimization: Date | null;
  lastCacheCleanup: Date | null;
}

interface IntegrityIssue {
  type: 'orphan_tag' | 'missing_file' | 'duplicate' | 'constraint_violation';
  severity: 'error' | 'warning' | 'info';
  description: string;
  affectedItems: any[];
  canAutoFix: boolean;
}
```

#### 3.1.2 ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```typescript
const DatabaseMaintenanceDialog: React.FC<{
  isOpen: boolean;
  onClose: () => void;
}> = ({ isOpen, onClose }) => {
  const [activeTab, setActiveTab] = useState<'overview' | 'backup' | 'integrity' | 'optimize' | 'stats'>('overview');
  const [dbInfo, setDbInfo] = useState<DatabaseInfo | null>(null);
  const [stats, setStats] = useState<DatabaseStats | null>(null);
  const [maintenanceStatus, setMaintenanceStatus] = useState<MaintenanceStatus | null>(null);

  useEffect(() => {
    if (isOpen) {
      loadDatabaseInfo();
    }
  }, [isOpen]);

  const loadDatabaseInfo = async () => {
    const info = await window.electronAPI.getDatabaseInfo();
    const dbStats = await window.electronAPI.getDatabaseStats();
    const status = await window.electronAPI.getMaintenanceStatus();

    setDbInfo(info);
    setStats(dbStats);
    setMaintenanceStatus(status);
  };

  if (!isOpen) return null;

  return (
    <div className="dialog-overlay" onClick={onClose}>
      <div className="dialog database-maintenance-dialog large" onClick={(e) => e.stopPropagation()}>
        <div className="dialog-header">
          <h2>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹</h2>
          <button className="close-button" onClick={onClose}>Ã—</button>
        </div>

        <div className="dialog-tabs">
          <button
            className={activeTab === 'overview' ? 'active' : ''}
            onClick={() => setActiveTab('overview')}
          >
            æ¦‚è¦
          </button>
          <button
            className={activeTab === 'backup' ? 'active' : ''}
            onClick={() => setActiveTab('backup')}
          >
            ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
          </button>
          <button
            className={activeTab === 'integrity' ? 'active' : ''}
            onClick={() => setActiveTab('integrity')}
          >
            æ•´åˆæ€§
          </button>
          <button
            className={activeTab === 'optimize' ? 'active' : ''}
            onClick={() => setActiveTab('optimize')}
          >
            æœ€é©åŒ–
          </button>
          <button
            className={activeTab === 'stats' ? 'active' : ''}
            onClick={() => setActiveTab('stats')}
          >
            çµ±è¨ˆ
          </button>
        </div>

        <div className="dialog-content">
          {activeTab === 'overview' && (
            <OverviewTab
              dbInfo={dbInfo}
              stats={stats}
              maintenanceStatus={maintenanceStatus}
            />
          )}
          {activeTab === 'backup' && (
            <BackupTab onBackupComplete={loadDatabaseInfo} />
          )}
          {activeTab === 'integrity' && (
            <IntegrityTab />
          )}
          {activeTab === 'optimize' && (
            <OptimizeTab onOptimizeComplete={loadDatabaseInfo} />
          )}
          {activeTab === 'stats' && (
            <StatsTab stats={stats} />
          )}
        </div>

        <div className="dialog-footer">
          <button onClick={onClose}>é–‰ã˜ã‚‹</button>
        </div>
      </div>
    </div>
  );
};
```

---

## 4. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å¾©å…ƒ

### 4.1 ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¿ãƒ–å®Ÿè£…

```typescript
const BackupTab: React.FC<{
  onBackupComplete: () => void;
}> = ({ onBackupComplete }) => {
  const [backupPath, setBackupPath] = useState('');
  const [backupItems, setBackupItems] = useState({
    database: true,
    settings: true,
    thumbnails: false,
    logs: false,
  });
  const [backupHistory, setBackupHistory] = useState<BackupRecord[]>([]);
  const [isBackingUp, setIsBackingUp] = useState(false);
  const [autoBackupEnabled, setAutoBackupEnabled] = useState(true);

  useEffect(() => {
    loadBackupHistory();
    loadBackupSettings();
  }, []);

  const loadBackupHistory = async () => {
    const history = await window.electronAPI.getBackupHistory();
    setBackupHistory(history);
  };

  const loadBackupSettings = async () => {
    const settings = await window.electronAPI.getBackupSettings();
    setBackupPath(settings.path);
    setAutoBackupEnabled(settings.autoBackupEnabled);
  };

  const handleCreateBackup = async () => {
    setIsBackingUp(true);
    try {
      await window.electronAPI.createBackup({
        path: backupPath,
        items: backupItems,
      });

      await loadBackupHistory();
      onBackupComplete();

      showNotification({
        type: 'success',
        message: 'ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãŒå®Œäº†ã—ã¾ã—ãŸ',
      });
    } catch (error) {
      showNotification({
        type: 'error',
        message: 'ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã«å¤±æ•—ã—ã¾ã—ãŸ',
      });
    } finally {
      setIsBackingUp(false);
    }
  };

  const handleRestore = async (backupId: string) => {
    const confirmed = await showConfirmDialog({
      title: 'ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å¾©å…ƒ',
      message: 'ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã¯ä¸Šæ›¸ãã•ã‚Œã¾ã™ã€‚ç¶šè¡Œã—ã¾ã™ã‹ï¼Ÿ',
      confirmText: 'å¾©å…ƒ',
      cancelText: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«',
      type: 'warning',
    });

    if (confirmed) {
      try {
        await window.electronAPI.restoreBackup(backupId);
        
        showNotification({
          type: 'success',
          message: 'ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å¾©å…ƒã—ã¾ã—ãŸã€‚ã‚¢ãƒ—ãƒªã‚’å†èµ·å‹•ã—ã¦ãã ã•ã„ã€‚',
        });

        // ã‚¢ãƒ—ãƒªå†èµ·å‹•
        window.electronAPI.relaunchApp();
      } catch (error) {
        showNotification({
          type: 'error',
          message: 'å¾©å…ƒã«å¤±æ•—ã—ã¾ã—ãŸ',
        });
      }
    }
  };

  const estimatedSize = calculateBackupSize(backupItems);

  return (
    <div className="backup-tab">
      <section className="backup-create">
        <h3>ğŸ’¾ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ</h3>
        
        <div className="form-group">
          <label>ä¿å­˜å…ˆ</label>
          <div className="path-input">
            <input
              type="text"
              value={backupPath}
              onChange={(e) => setBackupPath(e.target.value)}
              readOnly
            />
            <button onClick={async () => {
              const result = await window.electronAPI.selectFolder();
              if (result) setBackupPath(result);
            }}>
              å‚ç…§...
            </button>
          </div>
        </div>

        <div className="backup-items">
          <label>
            <input
              type="checkbox"
              checked={backupItems.database}
              onChange={(e) => setBackupItems(prev => ({
                ...prev,
                database: e.target.checked
              }))}
            />
            ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«
          </label>
          <label>
            <input
              type="checkbox"
              checked={backupItems.settings}
              onChange={(e) => setBackupItems(prev => ({
                ...prev,
                settings: e.target.checked
              }))}
            />
            è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
          </label>
          <label>
            <input
              type="checkbox"
              checked={backupItems.thumbnails}
              onChange={(e) => setBackupItems(prev => ({
                ...prev,
                thumbnails: e.target.checked
              }))}
            />
            ã‚µãƒ ãƒã‚¤ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ (892 MB)
          </label>
          <label>
            <input
              type="checkbox"
              checked={backupItems.logs}
              onChange={(e) => setBackupItems(prev => ({
                ...prev,
                logs: e.target.checked
              }))}
            />
            ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«
          </label>
        </div>

        <div className="estimated-size">
          æ¨å®šãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚µã‚¤ã‚º: {formatFileSize(estimatedSize)}
        </div>

        <button
          className="primary"
          onClick={handleCreateBackup}
          disabled={isBackingUp}
        >
          {isBackingUp ? 'ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä¸­...' : 'ä»Šã™ããƒãƒƒã‚¯ã‚¢ãƒƒãƒ—'}
        </button>
      </section>

      <section className="backup-history">
        <h3>ğŸ“¦ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å±¥æ­´</h3>
        <div className="backup-list">
          {backupHistory.map(backup => (
            <div key={backup.id} className="backup-item">
              <div className="backup-info">
                <span className="backup-date">
                  {formatDate(backup.createdAt)}
                </span>
                <span className="backup-type">
                  {backup.type === 'manual' ? 'æ‰‹å‹•' : 'è‡ªå‹•'}
                </span>
                <span className="backup-size">
                  {formatFileSize(backup.size)}
                </span>
              </div>
              <div className="backup-actions">
                <button onClick={() => handleRestore(backup.id)}>
                  å¾©å…ƒ
                </button>
                <button onClick={() => deleteBackup(backup.id)}>
                  å‰Šé™¤
                </button>
              </div>
            </div>
          ))}
        </div>
      </section>

      <section className="auto-backup-settings">
        <h3>âš™ï¸ è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—è¨­å®š</h3>
        <label>
          <input
            type="checkbox"
            checked={autoBackupEnabled}
            onChange={(e) => {
              setAutoBackupEnabled(e.target.checked);
              window.electronAPI.setAutoBackup(e.target.checked);
            }}
          />
          è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’æœ‰åŠ¹åŒ–
        </label>
        {/* è¿½åŠ ã®è¨­å®šé …ç›® */}
      </section>
    </div>
  );
};
```

---

## 5. ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯

### 5.1 æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯å®Ÿè£…

```typescript
const IntegrityTab: React.FC = () => {
  const [checkItems, setCheckItems] = useState({
    fileExistence: true,
    orphanTags: true,
    duplicates: true,
    constraints: true,
    thumbnails: true,
    schema: true,
  });
  const [issues, setIssues] = useState<IntegrityIssue[]>([]);
  const [isChecking, setIsChecking] = useState(false);
  const [lastCheckDate, setLastCheckDate] = useState<Date | null>(null);

  const handleCheck = async () => {
    setIsChecking(true);
    try {
      const result = await window.electronAPI.checkIntegrity(checkItems);
      setIssues(result.issues);
      setLastCheckDate(new Date());
    } catch (error) {
      showNotification({
        type: 'error',
        message: 'ãƒã‚§ãƒƒã‚¯ã«å¤±æ•—ã—ã¾ã—ãŸ',
      });
    } finally {
      setIsChecking(false);
    }
  };

  const handleAutoFix = async () => {
    const fixableIssues = issues.filter(issue => issue.canAutoFix);
    
    if (fixableIssues.length === 0) {
      showNotification({
        type: 'info',
        message: 'è‡ªå‹•ä¿®å¾©å¯èƒ½ãªå•é¡Œã¯ã‚ã‚Šã¾ã›ã‚“',
      });
      return;
    }

    try {
      await window.electronAPI.autoFixIssues(fixableIssues);
      await handleCheck(); // å†ãƒã‚§ãƒƒã‚¯
      
      showNotification({
        type: 'success',
        message: `${fixableIssues.length}ä»¶ã®å•é¡Œã‚’ä¿®å¾©ã—ã¾ã—ãŸ`,
      });
    } catch (error) {
      showNotification({
        type: 'error',
        message: 'ä¿®å¾©ã«å¤±æ•—ã—ã¾ã—ãŸ',
      });
    }
  };

  return (
    <div className="integrity-tab">
      <section className="check-items">
        <h3>ğŸ” ãƒã‚§ãƒƒã‚¯é …ç›®</h3>
        {Object.entries(checkItems).map(([key, value]) => (
          <label key={key}>
            <input
              type="checkbox"
              checked={value}
              onChange={(e) => setCheckItems(prev => ({
                ...prev,
                [key]: e.target.checked
              }))}
            />
            {getCheckItemLabel(key)}
          </label>
        ))}
      </section>

      <button
        className="primary"
        onClick={handleCheck}
        disabled={isChecking}
      >
        {isChecking ? 'ãƒã‚§ãƒƒã‚¯ä¸­...' : 'ãƒã‚§ãƒƒã‚¯é–‹å§‹'}
      </button>

      {lastCheckDate && (
        <section className="check-results">
          <h3>ğŸ“‹ ãƒã‚§ãƒƒã‚¯çµæœ</h3>
          <p className="check-date">
            æœ€çµ‚ãƒã‚§ãƒƒã‚¯: {formatDateTime(lastCheckDate)}
          </p>

          {issues.length === 0 ? (
            <div className="no-issues">
              âœ“ å•é¡Œã¯æ¤œå‡ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ
            </div>
          ) : (
            <div className="issues-list">
              {issues.map((issue, index) => (
                <IssueItem
                  key={index}
                  issue={issue}
                  onFix={() => handleAutoFix()}
                />
              ))}
            </div>
          )}

          {issues.some(i => i.canAutoFix) && (
            <button className="primary" onClick={handleAutoFix}>
              å•é¡Œã‚’è‡ªå‹•ä¿®å¾©
            </button>
          )}
        </section>
      )}
    </div>
  );
};

const IssueItem: React.FC<{
  issue: IntegrityIssue;
  onFix: () => void;
}> = ({ issue, onFix }) => {
  const [expanded, setExpanded] = useState(false);

  const getSeverityIcon = () => {
    switch (issue.severity) {
      case 'error': return 'âœ—';
      case 'warning': return 'âš ';
      case 'info': return 'â„¹';
    }
  };

  const getSeverityClass = () => {
    return `issue-${issue.severity}`;
  };

  return (
    <div className={`issue-item ${getSeverityClass()}`}>
      <div className="issue-header" onClick={() => setExpanded(!expanded)}>
        <span className="issue-icon">{getSeverityIcon()}</span>
        <span className="issue-description">{issue.description}</span>
        <span className="issue-count">
          {issue.affectedItems.length}ä»¶
        </span>
        {issue.canAutoFix && (
          <span className="can-fix">ä¿®å¾©å¯èƒ½</span>
        )}
        <button className="expand-button">
          {expanded ? 'â–¼' : 'â–¶'}
        </button>
      </div>

      {expanded && (
        <div className="issue-details">
          <div className="affected-items">
            {issue.affectedItems.slice(0, 10).map((item, index) => (
              <div key={index} className="affected-item">
                {typeof item === 'string' ? item : JSON.stringify(item)}
              </div>
            ))}
            {issue.affectedItems.length > 10 && (
              <p className="more-items">
                ä»– {issue.affectedItems.length - 10} ä»¶
              </p>
            )}
          </div>
        </div>
      )}
    </div>
  );
};

const getCheckItemLabel = (key: string): string => {
  const labels: Record<string, string> = {
    fileExistence: 'ãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ç¢ºèª',
    orphanTags: 'å­¤ç«‹ã‚¿ã‚°ã®æ¤œå‡º',
    duplicates: 'é‡è¤‡ã‚¨ãƒ³ãƒˆãƒªã®æ¤œå‡º',
    constraints: 'å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã®æ¤œè¨¼',
    thumbnails: 'ã‚µãƒ ãƒã‚¤ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®æ•´åˆæ€§',
    schema: 'ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã®æ¤œè¨¼',
  };
  return labels[key] || key;
};
```

---

## 6. çµ±è¨ˆæƒ…å ±

### 6.1 çµ±è¨ˆã‚¿ãƒ–å®Ÿè£…

```typescript
const StatsTab: React.FC<{
  stats: DatabaseStats | null;
}> = ({ stats }) => {
  const [storageBreakdown, setStorageBreakdown] = useState<StorageBreakdown | null>(null);
  const [tableStats, setTableStats] = useState<TableStats[]>([]);
  const [growthTrend, setGrowthTrend] = useState<GrowthData[]>([]);

  useEffect(() => {
    loadStorageBreakdown();
    loadTableStats();
    loadGrowthTrend();
  }, []);

  const loadStorageBreakdown = async () => {
    const data = await window.electronAPI.getStorageBreakdown();
    setStorageBreakdown(data);
  };

  const loadTableStats = async () => {
    const data = await window.electronAPI.getTableStats();
    setTableStats(data);
  };

  const loadGrowthTrend = async () => {
    const data = await window.electronAPI.getGrowthTrend(30); // éå»30æ—¥
    setGrowthTrend(data);
  };

  if (!stats || !storageBreakdown) {
    return <div>èª­ã¿è¾¼ã¿ä¸­...</div>;
  }

  return (
    <div className="stats-tab">
      <section className="storage-usage">
        <h3>ğŸ’¾ ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä½¿ç”¨çŠ¶æ³</h3>
        
        <div className="storage-bars">
          <StorageBar
            label="ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹"
            size={storageBreakdown.database}
            total={storageBreakdown.total}
            color="#1976d2"
          />
          <StorageBar
            label="ã‚µãƒ ãƒã‚¤ãƒ«"
            size={storageBreakdown.thumbnails}
            total={storageBreakdown.total}
            color="#4caf50"
          />
          <StorageBar
            label="ãƒ­ã‚°"
            size={storageBreakdown.logs}
            total={storageBreakdown.total}
            color="#ff9800"
          />
          <StorageBar
            label="è¨­å®š"
            size={storageBreakdown.settings}
            total={storageBreakdown.total}
            color="#9c27b0"
          />
          <StorageBar
            label="ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—"
            size={storageBreakdown.backups}
            total={storageBreakdown.total}
            color="#f44336"
          />
        </div>

        <div className="total-size">
          åˆè¨ˆ: {formatFileSize(storageBreakdown.total)}
        </div>

        <div className="storage-chart">
          <PieChart data={storageBreakdown} />
        </div>
      </section>

      <section className="table-stats">
        <h3>ğŸ“Š ãƒ†ãƒ¼ãƒ–ãƒ«çµ±è¨ˆ</h3>
        <table className="stats-table">
          <thead>
            <tr>
              <th>ãƒ†ãƒ¼ãƒ–ãƒ«å</th>
              <th>ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°</th>
              <th>ã‚µã‚¤ã‚º</th>
              <th>ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹</th>
            </tr>
          </thead>
          <tbody>
            {tableStats.map(table => (
              <tr key={table.name}>
                <td>{table.name}</td>
                <td>{table.rowCount.toLocaleString()}ä»¶</td>
                <td>{formatFileSize(table.dataSize)}</td>
                <td>{formatFileSize(table.indexSize)}</td>
              </tr>
            ))}
          </tbody>
        </table>
      </section>

      <section className="growth-trend">
        <h3>ğŸ“ˆ æˆé•·ãƒˆãƒ¬ãƒ³ãƒ‰ (éå»30æ—¥)</h3>
        <div className="trend-chart">
          <LineChart data={growthTrend} />
        </div>
        <div className="trend-summary">
          <div className="trend-item">
            <span className="label">ãƒ•ã‚¡ã‚¤ãƒ«æ•°:</span>
            <span className="value">
              +{growthTrend[growthTrend.length - 1]?.fileCountDelta || 0}ä»¶
              ({calculatePercentage(growthTrend, 'fileCount')}%)
            </span>
          </div>
          <div className="trend-item">
            <span className="label">DB ã‚µã‚¤ã‚º:</span>
            <span className="value">
              +{formatFileSize(growthTrend[growthTrend.length - 1]?.dbSizeDelta || 0)}
              ({calculatePercentage(growthTrend, 'dbSize')}%)
            </span>
          </div>
        </div>
      </section>
    </div>
  );
};

const StorageBar: React.FC<{
  label: string;
  size: number;
  total: number;
  color: string;
}> = ({ label, size, total, color }) => {
  const percentage = (size / total) * 100;

  return (
    <div className="storage-bar">
      <div className="bar-label">
        <span>{label}</span>
        <span>{formatFileSize(size)} ({percentage.toFixed(0)}%)</span>
      </div>
      <div className="bar-track">
        <div
          className="bar-fill"
          style={{
            width: `${percentage}%`,
            backgroundColor: color,
          }}
        />
      </div>
    </div>
  );
};

const PieChart: React.FC<{
  data: StorageBreakdown;
}> = ({ data }) => {
  const chartData = [
    { name: 'ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹', value: data.database, color: '#1976d2' },
    { name: 'ã‚µãƒ ãƒã‚¤ãƒ«', value: data.thumbnails, color: '#4caf50' },
    { name: 'ãƒ­ã‚°', value: data.logs, color: '#ff9800' },
    { name: 'è¨­å®š', value: data.settings, color: '#9c27b0' },
    { name: 'ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—', value: data.backups, color: '#f44336' },
  ];

  // ç°¡æ˜“çš„ãªå††ã‚°ãƒ©ãƒ•å®Ÿè£…ï¼ˆå®Ÿéš›ã¯rechartsç­‰ã‚’ä½¿ç”¨ï¼‰
  return (
    <div className="pie-chart">
      <svg viewBox="0 0 200 200" width="200" height="200">
        {/* å††ã‚°ãƒ©ãƒ•ã®æç”»ãƒ­ã‚¸ãƒƒã‚¯ */}
      </svg>
      <div className="chart-legend">
        {chartData.map(item => (
          <div key={item.name} className="legend-item">
            <div
              className="legend-color"
              style={{ backgroundColor: item.color }}
            />
            <span>{item.name}</span>
          </div>
        ))}
      </div>
    </div>
  );
};

const LineChart: React.FC<{
  data: GrowthData[];
}> = ({ data }) => {
  // ç°¡æ˜“çš„ãªæŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ï¼ˆå®Ÿéš›ã¯rechartsç­‰ã‚’ä½¿ç”¨ï¼‰
  return (
    <div className="line-chart">
      {/* ã‚°ãƒ©ãƒ•æç”» */}
    </div>
  );
};

interface StorageBreakdown {
  database: number;
  thumbnails: number;
  logs: number;
  settings: number;
  backups: number;
  total: number;
}

interface TableStats {
  name: string;
  rowCount: number;
  dataSize: number;
  indexSize: number;
}

interface GrowthData {
  date: string;
  fileCount: number;
  dbSize: number;
  fileCountDelta: number;
  dbSizeDelta: number;
}
```

---

## 7. ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚»ã‚¹å®Ÿè£…

### 7.1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚µãƒ¼ãƒ“ã‚¹

```typescript
// main/services/database-maintenance.ts
import { Database } from 'better-sqlite3';
import * as fs from 'fs';
import * as path from 'path';

export class DatabaseMaintenanceService {
  constructor(private db: Database) {}

  // ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ
  async createBackup(options: BackupOptions): Promise<string> {
    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
    const backupDir = options.path || path.join(app.getPath('userData'), 'backups');
    const backupPath = path.join(backupDir, `backup_${timestamp}`);

    await fs.promises.mkdir(backupPath, { recursive: true });

    // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
    if (options.items.database) {
      await this.backupDatabase(backupPath);
    }

    // è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
    if (options.items.settings) {
      await this.backupSettings(backupPath);
    }

    // ã‚µãƒ ãƒã‚¤ãƒ«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
    if (options.items.thumbnails) {
      await this.backupThumbnails(backupPath);
    }

    // ãƒ­ã‚°ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
    if (options.items.logs) {
      await this.backupLogs(backupPath);
    }

    // ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æƒ…å ±ã‚’ä¿å­˜
    const backupInfo = {
      id: timestamp,
      createdAt: new Date(),
      type: 'manual',
      size: await this.calculateDirectorySize(backupPath),
      items: options.items,
    };

    await fs.promises.writeFile(
      path.join(backupPath, 'backup-info.json'),
      JSON.stringify(backupInfo, null, 2)
    );

    return backupPath;
  }

  // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
  private async backupDatabase(backupPath: string): Promise<void> {
    const dbPath = this.db.name;
    const backupDbPath = path.join(backupPath, 'main.db');

    // SQLiteã®BACKUPã‚³ãƒãƒ³ãƒ‰ä½¿ç”¨
    await this.db.backup(backupDbPath);
  }

  // æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
  async checkIntegrity(options: IntegrityCheckOptions): Promise<IntegrityCheckResult> {
    const issues: IntegrityIssue[] = [];

    // ãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ç¢ºèª
    if (options.fileExistence) {
      const fileIssues = await this.checkFileExistence();
      issues.push(...fileIssues);
    }

    // å­¤ç«‹ã‚¿ã‚°æ¤œå‡º
    if (options.orphanTags) {
      const orphanIssues = await this.checkOrphanTags();
      issues.push(...orphanIssues);
    }

    // é‡è¤‡æ¤œå‡º
    if (options.duplicates) {
      const duplicateIssues = await this.checkDuplicates();
      issues.push(...duplicateIssues);
    }

    // å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„æ¤œè¨¼
    if (options.constraints) {
      const constraintIssues = await this.checkConstraints();
      issues.push(...constraintIssues);
    }

    return {
      issues,
      checkedAt: new Date(),
    };
  }

  private async checkFileExistence(): Promise<IntegrityIssue[]> {
    const files = this.db.prepare('SELECT id, file_path FROM files WHERE is_available = 1').all();
    const missingFiles: any[] = [];

    for (const file of files) {
      try {
        await fs.promises.access(file.file_path);
      } catch {
        missingFiles.push(file);
      }
    }

    if (missingFiles.length > 0) {
      return [{
        type: 'missing_file',
        severity: 'error',
        description: `${missingFiles.length}ä»¶ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“`,
        affectedItems: missingFiles,
        canAutoFix: true, // is_available = 0 ã«æ›´æ–°å¯èƒ½
      }];
    }

    return [];
  }

  private async checkOrphanTags(): Promise<IntegrityIssue[]> {
    const orphanTags = this.db.prepare(`
      SELECT t.id, t.tag_name
      FROM tags t
      LEFT JOIN file_tags ft ON t.id = ft.tag_id
      WHERE ft.id IS NULL
    `).all();

    if (orphanTags.length > 0) {
      return [{
        type: 'orphan_tag',
        severity: 'warning',
        description: `${orphanTags.length}ä»¶ã®æœªä½¿ç”¨ã‚¿ã‚°ãŒã‚ã‚Šã¾ã™`,
        affectedItems: orphanTags,
        canAutoFix: true, // å‰Šé™¤å¯èƒ½
      }];
    }

    return [];
  }

  // VACUUMå®Ÿè¡Œ
  async vacuum(): Promise<VacuumResult> {
    const beforeSize = await this.getDatabaseSize();
    
    this.db.prepare('VACUUM').run();
    
    const afterSize = await this.getDatabaseSize();
    const savedSize = beforeSize - afterSize;

    return {
      beforeSize,
      afterSize,
      savedSize,
      percentage: (savedSize / beforeSize) * 100,
    };
  }

  // ANALYZEå®Ÿè¡Œ
  async analyze(): Promise<void> {
    this.db.prepare('ANALYZE').run();
  }

  // REINDEXå®Ÿè¡Œ
  async reindex(): Promise<void> {
    this.db.prepare('REINDEX').run();
  }

  // ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸çµ±è¨ˆå–å¾—
  async getStorageBreakdown(): Promise<StorageBreakdown> {
    const userDataPath = app.getPath('userData');

    const dbSize = await this.getDatabaseSize();
    const thumbnailSize = await this.getDirectorySize(path.join(userDataPath, 'cache', 'thumbnails'));
    const logSize = await this.getDirectorySize(path.join(userDataPath, 'logs'));
    const settingsSize = await this.getDirectorySize(path.join(userDataPath, 'config'));
    const backupSize = await this.getDirectorySize(path.join(userDataPath, 'backups'));

    return {
      database: dbSize,
      thumbnails: thumbnailSize,
      logs: logSize,
      settings: settingsSize,
      backups: backupSize,
      total: dbSize + thumbnailSize + logSize + settingsSize + backupSize,
    };
  }

  private async getDatabaseSize(): Promise<number> {
    const stats = await fs.promises.stat(this.db.name);
    return stats.size;
  }

  private async getDirectorySize(dirPath: string): Promise<number> {
    try {
      let totalSize = 0;
      const files = await fs.promises.readdir(dirPath, { withFileTypes: true });

      for (const file of files) {
        const filePath = path.join(dirPath, file.name);
        if (file.isDirectory()) {
          totalSize += await this.getDirectorySize(filePath);
        } else {
          const stats = await fs.promises.stat(filePath);
          totalSize += stats.size;
        }
      }

      return totalSize;
    } catch {
      return 0;
    }
  }
}
```

---

## 8. ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©

```css
.database-maintenance-dialog {
  width: 800px;
  max-height: 80vh;
}

.dialog-tabs {
  display: flex;
  border-bottom: 1px solid var(--divider);
  padding: 0 24px;
  gap: 4px;
}

.dialog-tabs button {
  padding: 12px 20px;
  background: none;
  border: none;
  border-bottom: 2px solid transparent;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  color: var(--text-secondary);
  transition: all 0.2s;
}

.dialog-tabs button:hover {
  color: var(--text-primary);
  background: var(--bg-hover);
}

.dialog-tabs button.active {
  color: var(--primary-main);
  border-bottom-color: var(--primary-main);
}

/* ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒãƒ¼ */
.storage-bar {
  margin-bottom: 16px;
}

.bar-label {
  display: flex;
  justify-content: space-between;
  margin-bottom: 4px;
  font-size: 13px;
}

.bar-track {
  height: 8px;
  background: var(--bg-secondary);
  border-radius: var(--radius-full);
  overflow: hidden;
}

.bar-fill {
  height: 100%;
  transition: width 0.3s ease;
}

/* æ•´åˆæ€§å•é¡Œ */
.issue-item {
  border: 1px solid var(--divider);
  border-radius: var(--radius-sm);
  margin-bottom: 8px;
  overflow: hidden;
}

.issue-item.issue-error {
  border-left: 4px solid var(--error);
}

.issue-item.issue-warning {
  border-left: 4px solid var(--warning);
}

.issue-item.issue-info {
  border-left: 4px solid var(--info);
}

.issue-header {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  cursor: pointer;
  transition: background 0.2s;
}

.issue-header:hover {
  background: var(--bg-hover);
}

.issue-icon {
  font-size: 18px;
}

.issue-description {
  flex: 1;
}

.can-fix {
  padding: 2px 8px;
  background: var(--success);
  color: white;
  border-radius: var(--radius-sm);
  font-size: 11px;
  font-weight: 600;
}

.issue-details {
  padding: 16px;
  background: var(--bg-secondary);
  border-top: 1px solid var(--divider);
}

.affected-items {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.affected-item {
  padding: 4px 8px;
  background: var(--bg-paper);
  border-radius: var(--radius-xs);
  font-family: monospace;
  font-size: 12px;
}
```
